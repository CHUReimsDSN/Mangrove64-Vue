(function(_e,l){typeof exports=="object"&&typeof module<"u"?l(exports,require("vue"),require("quasar")):typeof define=="function"&&define.amd?define(["exports","vue","quasar"],l):(_e=typeof globalThis<"u"?globalThis:_e||self,l(_e["mangrove64-vue"]={},_e.Vue,_e.Quasar))})(this,function(_e,l,De){"use strict";const On=l.defineComponent({__name:"TreeTableHeaderCell",props:{column:{},index:{},resizableColumns:{type:Boolean},borderStrategy:{}},setup(o){const t=o,n=l.ref(null),e=l.ref(null);let r=0,i=0,a=!1;function s(v){v.button===0&&(d(v.clientX),v.preventDefault())}function c(v){const S=v.touches[0];S&&(d(S.clientX),v.preventDefault())}function d(v){const S=n.value;S&&(r=v,i=S.getBoundingClientRect().width,a=!0,document.body.style.cursor="col-resize",document.body.style.userSelect="none",document.addEventListener("mousemove",h),document.addEventListener("mouseup",y),document.addEventListener("touchmove",f,{passive:!1}),document.addEventListener("touchend",w))}function h(v){a&&b(v.clientX)}function f(v){if(!a)return;const S=v.touches[0];S&&(b(S.clientX),v.preventDefault())}function b(v){const S=n.value;if(!S)return;const R=v-r,J=Math.max(60,Math.round(i+R));S.style.width=`${J}px`}function y(){x()}function w(){x()}function x(){a&&(a=!1,document.body.style.cursor="",document.body.style.userSelect="",document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",y),document.removeEventListener("touchmove",f),document.removeEventListener("touchend",w))}const z=l.computed(()=>`text-align: ${t.column.align??"left"};`),W=l.computed(()=>{let v="";return t.borderStrategy!=="none"&&(v+=" tree-table-bordered-ltrb"),v});return l.onMounted(()=>{if(!t.resizableColumns)return;const v=e.value;v&&(v.addEventListener("mousedown",s),v.addEventListener("touchstart",c,{passive:!1}))}),l.onBeforeUnmount(()=>{if(!t.resizableColumns)return;const v=e.value;v&&(v.removeEventListener("mousedown",s),v.removeEventListener("touchstart",c)),x()}),(v,S)=>(l.openBlock(),l.createElementBlock("th",{class:l.normalizeClass(["tree-table-cell-header",W.value]),ref_key:"thEl",ref:n},[l.createElementVNode("div",{class:"tree-table-cell-header-content",style:l.normalizeStyle(z.value)},[l.createTextVNode(l.toDisplayString(t.column.label)+" ",1),t.resizableColumns?(l.openBlock(),l.createElementBlock("div",{key:0,class:"tree-table-resize-handle",ref_key:"handle",ref:e},null,512)):l.createCommentVNode("",!0)],4)],2))}}),In={key:1,class:"tree-table-cell-inner"},Pn=l.defineComponent({__name:"TreeTableBodyCell",props:{node:{},column:{},cellCssClass:{},borderStrategy:{},slotRender:{}},setup(o){const t=o,n=l.computed(()=>t.column.format?t.column.format(t.node):t.node[t.column.fieldTarget]),e=l.computed(()=>{let r="tree-table-cell";switch(r+=` ${t.cellCssClass}`,t.column.cssClass&&(r+=` ${t.column.cssClass}`),t.borderStrategy){case"horizontal":r+=" tree-table-bordered-t";break;case"vertical":r+=" tree-table-bordered-lr";break;case"cell":r+=" tree-table-bordered-ltr";break}return r});return(r,i)=>(l.openBlock(),l.createElementBlock("td",{class:l.normalizeClass(e.value)},[t.slotRender?(l.openBlock(),l.createBlock(l.resolveDynamicComponent({render:()=>t.slotRender({node:t.node})}),{key:0})):(l.openBlock(),l.createElementBlock("div",In,l.toDisplayString(n.value),1))],2))}}),Kn={class:"flex row no-wrap items-center tree-table-cell-inner"},Rn={key:1,class:"q-pr-xs"},Fn={key:4},Ln=l.defineComponent({__name:"TreeTableBodyFirstRowCell",props:{node:{},column:{},level:{},indentationPx:{},leaf:{type:Boolean},expanded:{type:Boolean},selected:{type:Boolean},isLoading:{type:Boolean},disabled:{type:Boolean},selectionMode:{},cellCssClass:{},borderStrategy:{},slotRender:{},checkboxColor:{}},emits:["node-expand-toggle","node-checkbox-toggle"],setup(o,{emit:t}){const n=t,e=o,r=l.ref(e.selected);function i(){e.disabled||n("node-expand-toggle",e.node,!e.expanded)}function a(){e.disabled||n("node-checkbox-toggle",e.node,!e.selected)}const s=l.computed(()=>e.selectionMode==="checkbox"),c=l.computed(()=>e.column.format?e.column.format(e.node):e.node[e.column.fieldTarget]),d=l.computed(()=>{let f="tree-table-cell";switch(f+=` ${e.cellCssClass}`,e.column.cssClass&&(f+=` ${e.column.cssClass}`),e.selected&&(f+=" tree-table-selected"),e.borderStrategy){case"horizontal":f+=" tree-table-bordered-t";break;case"vertical":f+=" tree-table-bordered-lr";break;case"cell":f+=" tree-table-bordered-ltr";break}return f}),h=l.computed(()=>`padding-left: ${e.level*e.indentationPx}px;`);return l.watch(()=>e.selected,f=>{r.value=f}),(f,b)=>(l.openBlock(),l.createElementBlock("td",{class:l.normalizeClass(d.value),style:l.normalizeStyle(h.value)},[l.createElementVNode("div",Kn,[s.value?(l.openBlock(),l.createBlock(l.unref(De.QCheckbox),{key:0,"onUpdate:modelValue":[a,b[0]||(b[0]=y=>r.value=y)],modelValue:r.value,size:"xs",dense:"",color:e.checkboxColor,disabled:e.disabled},null,8,["modelValue","color","disabled"])):l.createCommentVNode("",!0),e.isLoading?(l.openBlock(),l.createBlock(l.unref(De.QSpinner),{key:2,size:"xs",color:e.checkboxColor,thickness:4},null,8,["color"])):(l.openBlock(),l.createElementBlock(l.Fragment,{key:1},[e.leaf?(l.openBlock(),l.createElementBlock("span",Rn)):(l.openBlock(),l.createElementBlock(l.Fragment,{key:0},[e.expanded?(l.openBlock(),l.createBlock(l.unref(De.QIcon),{key:1,onClick:i,name:"keyboard_arrow_down",size:"1.2rem",class:"cursor-pointer"})):(l.openBlock(),l.createBlock(l.unref(De.QIcon),{key:0,onClick:i,name:"chevron_right",size:"1.2rem",class:"cursor-pointer"}))],64))],64)),e.slotRender?(l.openBlock(),l.createBlock(l.resolveDynamicComponent({render:()=>e.slotRender({node:e.node})}),{key:3})):(l.openBlock(),l.createElementBlock("div",Fn,l.toDisplayString(c.value),1))])],6))}}),Jt=l.defineComponent({__name:"TreeTableContextMenu",props:{node:{},contextMenu:{}},setup(o){const t=o;async function n(r){await r.action(t.node)}const e=l.computed(()=>{let r="";return t.contextMenu.cssClass&&(r+=t.contextMenu.cssClass),r});return(r,i)=>{const a=l.resolveDirective("close-popup");return l.openBlock(),l.createBlock(l.unref(De.QMenu),{"context-menu":"","touch-position":""},{default:l.withCtx(()=>[l.createVNode(l.unref(De.QList),{class:l.normalizeClass(e.value),dense:""},{default:l.withCtx(()=>[(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(t.contextMenu.actions,s=>l.withDirectives((l.openBlock(),l.createBlock(l.unref(De.QItem),{key:s.label,class:l.normalizeClass([s.cssClass,"flex row no-wrap items-center"]),dense:"",clickable:"",onClick:c=>n(s)},{default:l.withCtx(()=>[s.icon?(l.openBlock(),l.createBlock(l.unref(De.QIcon),{key:0,name:s.icon,size:"xs",class:"q-pr-xs"},null,8,["name"])):l.createCommentVNode("",!0),l.createTextVNode(" "+l.toDisplayString(s.label),1)]),_:2},1032,["class","onClick"])),[[a]])),128))]),_:1},8,["class"])]),_:1})}}}),zn=["data-key"],Hn=l.defineComponent({__name:"TreeTableRow",props:{node:{},columns:{},nodeKey:{},childrenKey:{},hasChildrenKey:{},disabledKey:{},selectionMode:{},expanded:{type:Boolean},selected:{type:Boolean},isLoading:{type:Boolean},hidden:{type:Boolean},level:{},indentationPx:{},contextMenu:{},borderStrategy:{},rowCssClass:{},cellCssClass:{},slotMap:{},checkboxColor:{}},emits:["node-expand-toggle","node-checkbox-toggle","node-click"],setup(o,{emit:t}){const n=t,e=o;function r(f,b){n("node-expand-toggle",f,b)}function i(f,b){n("node-checkbox-toggle",f,b)}function a(f){n("node-click",f)}function s(f){return f[e.nodeKey]}const c=l.computed(()=>!e.node[e.hasChildrenKey]),d=l.computed(()=>{if(e.disabledKey!==void 0)return e.node[e.disabledKey]}),h=l.computed(()=>{let f="tree-table-row";return f+=` ${e.rowCssClass}`,e.selected&&(f+=" tree-table-row-selected"),e.hidden&&(f+=" tree-table-row-hidden"),f});return(f,b)=>(l.openBlock(),l.createElementBlock("tr",{onClick:b[0]||(b[0]=y=>a(e.node)),class:l.normalizeClass(h.value),"data-key":s(e.node)},[(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(e.columns,(y,w)=>(l.openBlock(),l.createElementBlock(l.Fragment,{key:y.name},[w===0?(l.openBlock(),l.createBlock(Ln,{key:0,column:y,node:e.node,level:e.level,indentationPx:e.indentationPx,leaf:c.value,expanded:e.expanded,disabled:d.value,selected:e.selected,isLoading:e.isLoading,selectionMode:e.selectionMode,"cell-css-class":e.cellCssClass,"border-strategy":e.borderStrategy,"slot-render":e.slotMap.get(y.name),"checkbox-color":e.checkboxColor,onNodeExpandToggle:r,onNodeCheckboxToggle:i},null,8,["column","node","level","indentationPx","leaf","expanded","disabled","selected","isLoading","selectionMode","cell-css-class","border-strategy","slot-render","checkbox-color"])):(l.openBlock(),l.createBlock(Pn,{key:1,column:y,node:e.node,"cell-css-class":e.cellCssClass,"border-strategy":e.borderStrategy,"slot-render":e.slotMap.get(y.name)},null,8,["column","node","cell-css-class","border-strategy","slot-render"]))],64))),128)),e.contextMenu?(l.openBlock(),l.createBlock(Jt,{key:0,"context-menu":e.contextMenu,node:e.node},null,8,["context-menu","node"])):l.createCommentVNode("",!0)],10,zn))}}),Xn=["data-key"],$n="__tree-table-fake-row-",Yn=l.defineComponent({__name:"TreeTableFakeRow",props:{node:{},columns:{},nodeKey:{},disabledKey:{},expanded:{type:Boolean},selected:{type:Boolean},hidden:{type:Boolean},level:{},indentationPx:{},contextMenu:{},borderStrategy:{},rowCssClass:{},cellCssClass:{},isDragging:{type:Boolean}},emits:["node-click"],setup(o,{emit:t}){const n=t,e=o;function r(d){return d[e.nodeKey]}function i(d){return`${$n}${r(d).toString()}`}function a(d){n("node-click",d)}const s=l.computed(()=>{let d="tree-table-row tree-table-fake-row";return d+=` ${e.rowCssClass}`,e.selected&&(d+=" tree-table-row-selected"),e.hidden&&(d+=" tree-table-row-hidden"),e.isDragging&&(d+=" tree-table-fake-row-display"),d}),c=l.computed(()=>{let d="";switch(d+=` ${e.cellCssClass}`,e.borderStrategy){case"horizontal":d+=" tree-table-bordered-b";break;case"vertical":d+=" tree-table-bordered-lr";break;case"cell":d+=" tree-table-bordered-lbr";break}return d});return(d,h)=>(l.openBlock(),l.createElementBlock("tr",{onClick:h[0]||(h[0]=f=>a(e.node)),class:l.normalizeClass(s.value),"data-key":i(e.node)},[(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(e.columns,f=>(l.openBlock(),l.createElementBlock("td",{key:f.name,class:l.normalizeClass(c.value)},null,2))),128)),e.contextMenu?(l.openBlock(),l.createBlock(Jt,{key:0,"context-menu":e.contextMenu,node:e.node},null,8,["context-menu","node"])):l.createCommentVNode("",!0)],10,Xn))}});/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function en(o,t){var n=Object.keys(o);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(o);t&&(e=e.filter(function(r){return Object.getOwnPropertyDescriptor(o,r).enumerable})),n.push.apply(n,e)}return n}function ge(o){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?en(Object(n),!0).forEach(function(e){Vn(o,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(n)):en(Object(n)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(n,e))})}return o}function ft(o){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ft=function(t){return typeof t}:ft=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ft(o)}function Vn(o,t,n){return t in o?Object.defineProperty(o,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[t]=n,o}function ue(){return ue=Object.assign||function(o){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(o[e]=n[e])}return o},ue.apply(this,arguments)}function Gn(o,t){if(o==null)return{};var n={},e=Object.keys(o),r,i;for(i=0;i<e.length;i++)r=e[i],!(t.indexOf(r)>=0)&&(n[r]=o[r]);return n}function Wn(o,t){if(o==null)return{};var n=Gn(o,t),e,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(o);for(r=0;r<i.length;r++)e=i[r],!(t.indexOf(e)>=0)&&Object.prototype.propertyIsEnumerable.call(o,e)&&(n[e]=o[e])}return n}function jn(o){return Un(o)||Qn(o)||qn(o)||Zn()}function Un(o){if(Array.isArray(o))return At(o)}function Qn(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}function qn(o,t){if(o){if(typeof o=="string")return At(o,t);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor&&(n=o.constructor.name),n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return At(o,t)}}function At(o,t){(t==null||t>o.length)&&(t=o.length);for(var n=0,e=new Array(t);n<t;n++)e[n]=o[n];return e}function Zn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Jn="1.15.6";function ye(o){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(o)}var Ee=ye(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),je=ye(/Edge/i),tn=ye(/firefox/i),Ue=ye(/safari/i)&&!ye(/chrome/i)&&!ye(/android/i),Mt=ye(/iP(ad|od|hone)/i),nn=ye(/chrome/i)&&ye(/android/i),on={capture:!1,passive:!1};function A(o,t,n){o.addEventListener(t,n,!Ee&&on)}function T(o,t,n){o.removeEventListener(t,n,!Ee&&on)}function ht(o,t){if(t){if(t[0]===">"&&(t=t.substring(1)),o)try{if(o.matches)return o.matches(t);if(o.msMatchesSelector)return o.msMatchesSelector(t);if(o.webkitMatchesSelector)return o.webkitMatchesSelector(t)}catch{return!1}return!1}}function rn(o){return o.host&&o!==document&&o.host.nodeType?o.host:o.parentNode}function oe(o,t,n,e){if(o){n=n||document;do{if(t!=null&&(t[0]===">"?o.parentNode===n&&ht(o,t):ht(o,t))||e&&o===n)return o;if(o===n)break}while(o=rn(o))}return null}var an=/\s+/g;function H(o,t,n){if(o&&t)if(o.classList)o.classList[n?"add":"remove"](t);else{var e=(" "+o.className+" ").replace(an," ").replace(" "+t+" "," ");o.className=(e+(n?" "+t:"")).replace(an," ")}}function E(o,t,n){var e=o&&o.style;if(e){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(o,""):o.currentStyle&&(n=o.currentStyle),t===void 0?n:n[t];!(t in e)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),e[t]=n+(typeof n=="string"?"":"px")}}function Oe(o,t){var n="";if(typeof o=="string")n=o;else do{var e=E(o,"transform");e&&e!=="none"&&(n=e+" "+n)}while(!t&&(o=o.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function ln(o,t,n){if(o){var e=o.getElementsByTagName(t),r=0,i=e.length;if(n)for(;r<i;r++)n(e[r],r);return e}return[]}function me(){var o=document.scrollingElement;return o||document.documentElement}function O(o,t,n,e,r){if(!(!o.getBoundingClientRect&&o!==window)){var i,a,s,c,d,h,f;if(o!==window&&o.parentNode&&o!==me()?(i=o.getBoundingClientRect(),a=i.top,s=i.left,c=i.bottom,d=i.right,h=i.height,f=i.width):(a=0,s=0,c=window.innerHeight,d=window.innerWidth,h=window.innerHeight,f=window.innerWidth),(t||n)&&o!==window&&(r=r||o.parentNode,!Ee))do if(r&&r.getBoundingClientRect&&(E(r,"transform")!=="none"||n&&E(r,"position")!=="static")){var b=r.getBoundingClientRect();a-=b.top+parseInt(E(r,"border-top-width")),s-=b.left+parseInt(E(r,"border-left-width")),c=a+i.height,d=s+i.width;break}while(r=r.parentNode);if(e&&o!==window){var y=Oe(r||o),w=y&&y.a,x=y&&y.d;y&&(a/=x,s/=w,f/=w,h/=x,c=a+h,d=s+f)}return{top:a,left:s,bottom:c,right:d,width:f,height:h}}}function sn(o,t,n){for(var e=ke(o,!0),r=O(o)[t];e;){var i=O(e)[n],a=void 0;if(a=r>=i,!a)return e;if(e===me())break;e=ke(e,!1)}return!1}function Le(o,t,n,e){for(var r=0,i=0,a=o.children;i<a.length;){if(a[i].style.display!=="none"&&a[i]!==C.ghost&&(e||a[i]!==C.dragged)&&oe(a[i],n.draggable,o,!1)){if(r===t)return a[i];r++}i++}return null}function Nt(o,t){for(var n=o.lastElementChild;n&&(n===C.ghost||E(n,"display")==="none"||t&&!ht(n,t));)n=n.previousElementSibling;return n||null}function X(o,t){var n=0;if(!o||!o.parentNode)return-1;for(;o=o.previousElementSibling;)o.nodeName.toUpperCase()!=="TEMPLATE"&&o!==C.clone&&(!t||ht(o,t))&&n++;return n}function cn(o){var t=0,n=0,e=me();if(o)do{var r=Oe(o),i=r.a,a=r.d;t+=o.scrollLeft*i,n+=o.scrollTop*a}while(o!==e&&(o=o.parentNode));return[t,n]}function eo(o,t){for(var n in o)if(o.hasOwnProperty(n)){for(var e in t)if(t.hasOwnProperty(e)&&t[e]===o[n][e])return Number(n)}return-1}function ke(o,t){if(!o||!o.getBoundingClientRect)return me();var n=o,e=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=E(n);if(n.clientWidth<n.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return me();if(e||t)return n;e=!0}}while(n=n.parentNode);return me()}function to(o,t){if(o&&t)for(var n in t)t.hasOwnProperty(n)&&(o[n]=t[n]);return o}function Bt(o,t){return Math.round(o.top)===Math.round(t.top)&&Math.round(o.left)===Math.round(t.left)&&Math.round(o.height)===Math.round(t.height)&&Math.round(o.width)===Math.round(t.width)}var Qe;function dn(o,t){return function(){if(!Qe){var n=arguments,e=this;n.length===1?o.call(e,n[0]):o.apply(e,n),Qe=setTimeout(function(){Qe=void 0},t)}}}function no(){clearTimeout(Qe),Qe=void 0}function un(o,t,n){o.scrollLeft+=t,o.scrollTop+=n}function Ot(o){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(o).cloneNode(!0):n?n(o).clone(!0)[0]:o.cloneNode(!0)}function fn(o,t){E(o,"position","absolute"),E(o,"top",t.top),E(o,"left",t.left),E(o,"width",t.width),E(o,"height",t.height)}function It(o){E(o,"position",""),E(o,"top",""),E(o,"left",""),E(o,"width",""),E(o,"height","")}function hn(o,t,n){var e={};return Array.from(o.children).forEach(function(r){var i,a,s,c;if(!(!oe(r,t.draggable,o,!1)||r.animated||r===n)){var d=O(r);e.left=Math.min((i=e.left)!==null&&i!==void 0?i:1/0,d.left),e.top=Math.min((a=e.top)!==null&&a!==void 0?a:1/0,d.top),e.right=Math.max((s=e.right)!==null&&s!==void 0?s:-1/0,d.right),e.bottom=Math.max((c=e.bottom)!==null&&c!==void 0?c:-1/0,d.bottom)}}),e.width=e.right-e.left,e.height=e.bottom-e.top,e.x=e.left,e.y=e.top,e}var U="Sortable"+new Date().getTime();function oo(){var o=[],t;return{captureAnimationState:function(){if(o=[],!!this.options.animation){var e=[].slice.call(this.el.children);e.forEach(function(r){if(!(E(r,"display")==="none"||r===C.ghost)){o.push({target:r,rect:O(r)});var i=ge({},o[o.length-1].rect);if(r.thisAnimationDuration){var a=Oe(r,!0);a&&(i.top-=a.f,i.left-=a.e)}r.fromRect=i}})}},addAnimationState:function(e){o.push(e)},removeAnimationState:function(e){o.splice(eo(o,{target:e}),1)},animateAll:function(e){var r=this;if(!this.options.animation){clearTimeout(t),typeof e=="function"&&e();return}var i=!1,a=0;o.forEach(function(s){var c=0,d=s.target,h=d.fromRect,f=O(d),b=d.prevFromRect,y=d.prevToRect,w=s.rect,x=Oe(d,!0);x&&(f.top-=x.f,f.left-=x.e),d.toRect=f,d.thisAnimationDuration&&Bt(b,f)&&!Bt(h,f)&&(w.top-f.top)/(w.left-f.left)===(h.top-f.top)/(h.left-f.left)&&(c=io(w,b,y,r.options)),Bt(f,h)||(d.prevFromRect=h,d.prevToRect=f,c||(c=r.options.animation),r.animate(d,w,f,c)),c&&(i=!0,a=Math.max(a,c),clearTimeout(d.animationResetTimer),d.animationResetTimer=setTimeout(function(){d.animationTime=0,d.prevFromRect=null,d.fromRect=null,d.prevToRect=null,d.thisAnimationDuration=null},c),d.thisAnimationDuration=c)}),clearTimeout(t),i?t=setTimeout(function(){typeof e=="function"&&e()},a):typeof e=="function"&&e(),o=[]},animate:function(e,r,i,a){if(a){E(e,"transition",""),E(e,"transform","");var s=Oe(this.el),c=s&&s.a,d=s&&s.d,h=(r.left-i.left)/(c||1),f=(r.top-i.top)/(d||1);e.animatingX=!!h,e.animatingY=!!f,E(e,"transform","translate3d("+h+"px,"+f+"px,0)"),this.forRepaintDummy=ro(e),E(e,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),E(e,"transform","translate3d(0,0,0)"),typeof e.animated=="number"&&clearTimeout(e.animated),e.animated=setTimeout(function(){E(e,"transition",""),E(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1},a)}}}}function ro(o){return o.offsetWidth}function io(o,t,n,e){return Math.sqrt(Math.pow(t.top-o.top,2)+Math.pow(t.left-o.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*e.animation}var ze=[],Pt={initializeByDefault:!0},qe={mount:function(t){for(var n in Pt)Pt.hasOwnProperty(n)&&!(n in t)&&(t[n]=Pt[n]);ze.forEach(function(e){if(e.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),ze.push(t)},pluginEvent:function(t,n,e){var r=this;this.eventCanceled=!1,e.cancel=function(){r.eventCanceled=!0};var i=t+"Global";ze.forEach(function(a){n[a.pluginName]&&(n[a.pluginName][i]&&n[a.pluginName][i](ge({sortable:n},e)),n.options[a.pluginName]&&n[a.pluginName][t]&&n[a.pluginName][t](ge({sortable:n},e)))})},initializePlugins:function(t,n,e,r){ze.forEach(function(s){var c=s.pluginName;if(!(!t.options[c]&&!s.initializeByDefault)){var d=new s(t,n,t.options);d.sortable=t,d.options=t.options,t[c]=d,ue(e,d.defaults)}});for(var i in t.options)if(t.options.hasOwnProperty(i)){var a=this.modifyOption(t,i,t.options[i]);typeof a<"u"&&(t.options[i]=a)}},getEventProperties:function(t,n){var e={};return ze.forEach(function(r){typeof r.eventProperties=="function"&&ue(e,r.eventProperties.call(n[r.pluginName],t))}),e},modifyOption:function(t,n,e){var r;return ze.forEach(function(i){t[i.pluginName]&&i.optionListeners&&typeof i.optionListeners[n]=="function"&&(r=i.optionListeners[n].call(t[i.pluginName],e))}),r}};function Ze(o){var t=o.sortable,n=o.rootEl,e=o.name,r=o.targetEl,i=o.cloneEl,a=o.toEl,s=o.fromEl,c=o.oldIndex,d=o.newIndex,h=o.oldDraggableIndex,f=o.newDraggableIndex,b=o.originalEvent,y=o.putSortable,w=o.extraEventProperties;if(t=t||n&&n[U],!!t){var x,z=t.options,W="on"+e.charAt(0).toUpperCase()+e.substr(1);window.CustomEvent&&!Ee&&!je?x=new CustomEvent(e,{bubbles:!0,cancelable:!0}):(x=document.createEvent("Event"),x.initEvent(e,!0,!0)),x.to=a||n,x.from=s||n,x.item=r||n,x.clone=i,x.oldIndex=c,x.newIndex=d,x.oldDraggableIndex=h,x.newDraggableIndex=f,x.originalEvent=b,x.pullMode=y?y.lastPutMode:void 0;var v=ge(ge({},w),qe.getEventProperties(e,t));for(var S in v)x[S]=v[S];n&&n.dispatchEvent(x),z[W]&&z[W].call(t,x)}}var ao=["evt"],re=function(t,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=e.evt,i=Wn(e,ao);qe.pluginEvent.bind(C)(t,n,ge({dragEl:g,parentEl:L,ghostEl:_,rootEl:I,nextEl:Ie,lastDownEl:pt,cloneEl:K,cloneHidden:xe,dragStarted:et,putSortable:Q,activeSortable:C.active,originalEvent:r,oldIndex:He,oldDraggableIndex:Je,newIndex:le,newDraggableIndex:Te,hideGhostForTarget:En,unhideGhostForTarget:wn,cloneNowHidden:function(){xe=!0},cloneNowShown:function(){xe=!1},dispatchSortableEvent:function(s){te({sortable:n,name:s,originalEvent:r})}},i))};function te(o){Ze(ge({putSortable:Q,cloneEl:K,targetEl:g,rootEl:I,oldIndex:He,oldDraggableIndex:Je,newIndex:le,newDraggableIndex:Te},o))}var g,L,_,I,Ie,pt,K,xe,He,le,Je,Te,gt,Q,Xe=!1,mt=!1,bt=[],Pe,fe,Kt,Rt,pn,gn,et,$e,tt,nt=!1,vt=!1,yt,Z,Ft=[],Lt=!1,Et=[],wt=typeof document<"u",Ct=Mt,mn=je||Ee?"cssFloat":"float",lo=wt&&!nn&&!Mt&&"draggable"in document.createElement("div"),bn=function(){if(wt){if(Ee)return!1;var o=document.createElement("x");return o.style.cssText="pointer-events:auto",o.style.pointerEvents==="auto"}}(),vn=function(t,n){var e=E(t),r=parseInt(e.width)-parseInt(e.paddingLeft)-parseInt(e.paddingRight)-parseInt(e.borderLeftWidth)-parseInt(e.borderRightWidth),i=Le(t,0,n),a=Le(t,1,n),s=i&&E(i),c=a&&E(a),d=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+O(i).width,h=c&&parseInt(c.marginLeft)+parseInt(c.marginRight)+O(a).width;if(e.display==="flex")return e.flexDirection==="column"||e.flexDirection==="column-reverse"?"vertical":"horizontal";if(e.display==="grid")return e.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&s.float&&s.float!=="none"){var f=s.float==="left"?"left":"right";return a&&(c.clear==="both"||c.clear===f)?"vertical":"horizontal"}return i&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||d>=r&&e[mn]==="none"||a&&e[mn]==="none"&&d+h>r)?"vertical":"horizontal"},so=function(t,n,e){var r=e?t.left:t.top,i=e?t.right:t.bottom,a=e?t.width:t.height,s=e?n.left:n.top,c=e?n.right:n.bottom,d=e?n.width:n.height;return r===s||i===c||r+a/2===s+d/2},co=function(t,n){var e;return bt.some(function(r){var i=r[U].options.emptyInsertThreshold;if(!(!i||Nt(r))){var a=O(r),s=t>=a.left-i&&t<=a.right+i,c=n>=a.top-i&&n<=a.bottom+i;if(s&&c)return e=r}}),e},yn=function(t){function n(i,a){return function(s,c,d,h){var f=s.options.group.name&&c.options.group.name&&s.options.group.name===c.options.group.name;if(i==null&&(a||f))return!0;if(i==null||i===!1)return!1;if(a&&i==="clone")return i;if(typeof i=="function")return n(i(s,c,d,h),a)(s,c,d,h);var b=(a?s:c).options.group.name;return i===!0||typeof i=="string"&&i===b||i.join&&i.indexOf(b)>-1}}var e={},r=t.group;(!r||ft(r)!="object")&&(r={name:r}),e.name=r.name,e.checkPull=n(r.pull,!0),e.checkPut=n(r.put),e.revertClone=r.revertClone,t.group=e},En=function(){!bn&&_&&E(_,"display","none")},wn=function(){!bn&&_&&E(_,"display","")};wt&&!nn&&document.addEventListener("click",function(o){if(mt)return o.preventDefault(),o.stopPropagation&&o.stopPropagation(),o.stopImmediatePropagation&&o.stopImmediatePropagation(),mt=!1,!1},!0);var Ke=function(t){if(g){t=t.touches?t.touches[0]:t;var n=co(t.clientX,t.clientY);if(n){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.target=e.rootEl=n,e.preventDefault=void 0,e.stopPropagation=void 0,n[U]._onDragOver(e)}}},uo=function(t){g&&g.parentNode[U]._isOutsideThisEl(t.target)};function C(o,t){if(!(o&&o.nodeType&&o.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(o));this.el=o,this.options=t=ue({},t),o[U]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(o.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return vn(o,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,s){a.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:C.supportPointer!==!1&&"PointerEvent"in window&&(!Ue||Mt),emptyInsertThreshold:5};qe.initializePlugins(this,o,n);for(var e in n)!(e in t)&&(t[e]=n[e]);yn(t);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=t.forceFallback?!1:lo,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?A(o,"pointerdown",this._onTapStart):(A(o,"mousedown",this._onTapStart),A(o,"touchstart",this._onTapStart)),this.nativeDraggable&&(A(o,"dragover",this),A(o,"dragenter",this)),bt.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),ue(this,oo())}C.prototype={constructor:C,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&($e=null)},_getDirection:function(t,n){return typeof this.options.direction=="function"?this.options.direction.call(this,t,n,g):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n=this,e=this.el,r=this.options,i=r.preventOnFilter,a=t.type,s=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,c=(s||t).target,d=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||c,h=r.filter;if(yo(e),!g&&!(/mousedown|pointerdown/.test(a)&&t.button!==0||r.disabled)&&!d.isContentEditable&&!(!this.nativeDraggable&&Ue&&c&&c.tagName.toUpperCase()==="SELECT")&&(c=oe(c,r.draggable,e,!1),!(c&&c.animated)&&pt!==c)){if(He=X(c),Je=X(c,r.draggable),typeof h=="function"){if(h.call(this,t,c,this)){te({sortable:n,rootEl:d,name:"filter",targetEl:c,toEl:e,fromEl:e}),re("filter",n,{evt:t}),i&&t.preventDefault();return}}else if(h&&(h=h.split(",").some(function(f){if(f=oe(d,f.trim(),e,!1),f)return te({sortable:n,rootEl:f,name:"filter",targetEl:c,fromEl:e,toEl:e}),re("filter",n,{evt:t}),!0}),h)){i&&t.preventDefault();return}r.handle&&!oe(d,r.handle,e,!1)||this._prepareDragStart(t,s,c)}}},_prepareDragStart:function(t,n,e){var r=this,i=r.el,a=r.options,s=i.ownerDocument,c;if(e&&!g&&e.parentNode===i){var d=O(e);if(I=i,g=e,L=g.parentNode,Ie=g.nextSibling,pt=e,gt=a.group,C.dragged=g,Pe={target:g,clientX:(n||t).clientX,clientY:(n||t).clientY},pn=Pe.clientX-d.left,gn=Pe.clientY-d.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,g.style["will-change"]="all",c=function(){if(re("delayEnded",r,{evt:t}),C.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!tn&&r.nativeDraggable&&(g.draggable=!0),r._triggerDragStart(t,n),te({sortable:r,name:"choose",originalEvent:t}),H(g,a.chosenClass,!0)},a.ignore.split(",").forEach(function(h){ln(g,h.trim(),zt)}),A(s,"dragover",Ke),A(s,"mousemove",Ke),A(s,"touchmove",Ke),a.supportPointer?(A(s,"pointerup",r._onDrop),!this.nativeDraggable&&A(s,"pointercancel",r._onDrop)):(A(s,"mouseup",r._onDrop),A(s,"touchend",r._onDrop),A(s,"touchcancel",r._onDrop)),tn&&this.nativeDraggable&&(this.options.touchStartThreshold=4,g.draggable=!0),re("delayStart",this,{evt:t}),a.delay&&(!a.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(je||Ee))){if(C.eventCanceled){this._onDrop();return}a.supportPointer?(A(s,"pointerup",r._disableDelayedDrag),A(s,"pointercancel",r._disableDelayedDrag)):(A(s,"mouseup",r._disableDelayedDrag),A(s,"touchend",r._disableDelayedDrag),A(s,"touchcancel",r._disableDelayedDrag)),A(s,"mousemove",r._delayedDragTouchMoveHandler),A(s,"touchmove",r._delayedDragTouchMoveHandler),a.supportPointer&&A(s,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(c,a.delay)}else c()}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){g&&zt(g),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;T(t,"mouseup",this._disableDelayedDrag),T(t,"touchend",this._disableDelayedDrag),T(t,"touchcancel",this._disableDelayedDrag),T(t,"pointerup",this._disableDelayedDrag),T(t,"pointercancel",this._disableDelayedDrag),T(t,"mousemove",this._delayedDragTouchMoveHandler),T(t,"touchmove",this._delayedDragTouchMoveHandler),T(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||t.pointerType=="touch"&&t,!this.nativeDraggable||n?this.options.supportPointer?A(document,"pointermove",this._onTouchMove):n?A(document,"touchmove",this._onTouchMove):A(document,"mousemove",this._onTouchMove):(A(g,"dragend",this),A(I,"dragstart",this._onDragStart));try{document.selection?_t(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,n){if(Xe=!1,I&&g){re("dragStarted",this,{evt:n}),this.nativeDraggable&&A(document,"dragover",uo);var e=this.options;!t&&H(g,e.dragClass,!1),H(g,e.ghostClass,!0),C.active=this,t&&this._appendGhost(),te({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(fe){this._lastX=fe.clientX,this._lastY=fe.clientY,En();for(var t=document.elementFromPoint(fe.clientX,fe.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(fe.clientX,fe.clientY),t!==n);)n=t;if(g.parentNode[U]._isOutsideThisEl(t),n)do{if(n[U]){var e=void 0;if(e=n[U]._onDragOver({clientX:fe.clientX,clientY:fe.clientY,target:t,rootEl:n}),e&&!this.options.dragoverBubble)break}t=n}while(n=rn(n));wn()}},_onTouchMove:function(t){if(Pe){var n=this.options,e=n.fallbackTolerance,r=n.fallbackOffset,i=t.touches?t.touches[0]:t,a=_&&Oe(_,!0),s=_&&a&&a.a,c=_&&a&&a.d,d=Ct&&Z&&cn(Z),h=(i.clientX-Pe.clientX+r.x)/(s||1)+(d?d[0]-Ft[0]:0)/(s||1),f=(i.clientY-Pe.clientY+r.y)/(c||1)+(d?d[1]-Ft[1]:0)/(c||1);if(!C.active&&!Xe){if(e&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<e)return;this._onDragStart(t,!0)}if(_){a?(a.e+=h-(Kt||0),a.f+=f-(Rt||0)):a={a:1,b:0,c:0,d:1,e:h,f};var b="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");E(_,"webkitTransform",b),E(_,"mozTransform",b),E(_,"msTransform",b),E(_,"transform",b),Kt=h,Rt=f,fe=i}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!_){var t=this.options.fallbackOnBody?document.body:I,n=O(g,!0,Ct,!0,t),e=this.options;if(Ct){for(Z=t;E(Z,"position")==="static"&&E(Z,"transform")==="none"&&Z!==document;)Z=Z.parentNode;Z!==document.body&&Z!==document.documentElement?(Z===document&&(Z=me()),n.top+=Z.scrollTop,n.left+=Z.scrollLeft):Z=me(),Ft=cn(Z)}_=g.cloneNode(!0),H(_,e.ghostClass,!1),H(_,e.fallbackClass,!0),H(_,e.dragClass,!0),E(_,"transition",""),E(_,"transform",""),E(_,"box-sizing","border-box"),E(_,"margin",0),E(_,"top",n.top),E(_,"left",n.left),E(_,"width",n.width),E(_,"height",n.height),E(_,"opacity","0.8"),E(_,"position",Ct?"absolute":"fixed"),E(_,"zIndex","100000"),E(_,"pointerEvents","none"),C.ghost=_,t.appendChild(_),E(_,"transform-origin",pn/parseInt(_.style.width)*100+"% "+gn/parseInt(_.style.height)*100+"%")}},_onDragStart:function(t,n){var e=this,r=t.dataTransfer,i=e.options;if(re("dragStart",this,{evt:t}),C.eventCanceled){this._onDrop();return}re("setupClone",this),C.eventCanceled||(K=Ot(g),K.removeAttribute("id"),K.draggable=!1,K.style["will-change"]="",this._hideClone(),H(K,this.options.chosenClass,!1),C.clone=K),e.cloneId=_t(function(){re("clone",e),!C.eventCanceled&&(e.options.removeCloneOnHide||I.insertBefore(K,g),e._hideClone(),te({sortable:e,name:"clone"}))}),!n&&H(g,i.dragClass,!0),n?(mt=!0,e._loopId=setInterval(e._emulateDragOver,50)):(T(document,"mouseup",e._onDrop),T(document,"touchend",e._onDrop),T(document,"touchcancel",e._onDrop),r&&(r.effectAllowed="move",i.setData&&i.setData.call(e,r,g)),A(document,"drop",e),E(g,"transform","translateZ(0)")),Xe=!0,e._dragStartId=_t(e._dragStarted.bind(e,n,t)),A(document,"selectstart",e),et=!0,window.getSelection().removeAllRanges(),Ue&&E(document.body,"user-select","none")},_onDragOver:function(t){var n=this.el,e=t.target,r,i,a,s=this.options,c=s.group,d=C.active,h=gt===c,f=s.sort,b=Q||d,y,w=this,x=!1;if(Lt)return;function z(Fe,Ve){re(Fe,w,ge({evt:t,isOwner:h,axis:y?"vertical":"horizontal",revert:a,dragRect:r,targetRect:i,canSort:f,fromSortable:b,target:e,completed:v,onMove:function(ct,Ut){return St(I,n,g,r,ct,O(ct),t,Ut)},changed:S},Ve))}function W(){z("dragOverAnimationCapture"),w.captureAnimationState(),w!==b&&b.captureAnimationState()}function v(Fe){return z("dragOverCompleted",{insertion:Fe}),Fe&&(h?d._hideClone():d._showClone(w),w!==b&&(H(g,Q?Q.options.ghostClass:d.options.ghostClass,!1),H(g,s.ghostClass,!0)),Q!==w&&w!==C.active?Q=w:w===C.active&&Q&&(Q=null),b===w&&(w._ignoreWhileAnimating=e),w.animateAll(function(){z("dragOverAnimationComplete"),w._ignoreWhileAnimating=null}),w!==b&&(b.animateAll(),b._ignoreWhileAnimating=null)),(e===g&&!g.animated||e===n&&!e.animated)&&($e=null),!s.dragoverBubble&&!t.rootEl&&e!==document&&(g.parentNode[U]._isOutsideThisEl(t.target),!Fe&&Ke(t)),!s.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),x=!0}function S(){le=X(g),Te=X(g,s.draggable),te({sortable:w,name:"change",toEl:n,newIndex:le,newDraggableIndex:Te,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),e=oe(e,s.draggable,n,!0),z("dragOver"),C.eventCanceled)return x;if(g.contains(t.target)||e.animated&&e.animatingX&&e.animatingY||w._ignoreWhileAnimating===e)return v(!1);if(mt=!1,d&&!s.disabled&&(h?f||(a=L!==I):Q===this||(this.lastPutMode=gt.checkPull(this,d,g,t))&&c.checkPut(this,d,g,t))){if(y=this._getDirection(t,e)==="vertical",r=O(g),z("dragOverValid"),C.eventCanceled)return x;if(a)return L=I,W(),this._hideClone(),z("revert"),C.eventCanceled||(Ie?I.insertBefore(g,Ie):I.appendChild(g)),v(!0);var R=Nt(n,s.draggable);if(!R||go(t,y,this)&&!R.animated){if(R===g)return v(!1);if(R&&n===t.target&&(e=R),e&&(i=O(e)),St(I,n,g,r,e,i,t,!!e)!==!1)return W(),R&&R.nextSibling?n.insertBefore(g,R.nextSibling):n.appendChild(g),L=n,S(),v(!0)}else if(R&&po(t,y,this)){var J=Le(n,0,s,!0);if(J===g)return v(!1);if(e=J,i=O(e),St(I,n,g,r,e,i,t,!1)!==!1)return W(),n.insertBefore(g,J),L=n,S(),v(!0)}else if(e.parentNode===n){i=O(e);var ae=0,we,Me=g.parentNode!==n,ee=!so(g.animated&&g.toRect||r,e.animated&&e.toRect||i,y),pe=y?"top":"left",ce=sn(e,"top","top")||sn(g,"top","top"),de=ce?ce.scrollTop:void 0;$e!==e&&(we=i[pe],nt=!1,vt=!ee&&s.invertSwap||Me),ae=mo(t,e,i,y,ee?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,vt,$e===e);var F;if(ae!==0){var Ce=X(g);do Ce-=ae,F=L.children[Ce];while(F&&(E(F,"display")==="none"||F===_))}if(ae===0||F===e)return v(!1);$e=e,tt=ae;var Ne=e.nextElementSibling,be=!1;be=ae===1;var Be=St(I,n,g,r,e,i,t,be);if(Be!==!1)return(Be===1||Be===-1)&&(be=Be===1),Lt=!0,setTimeout(ho,30),W(),be&&!Ne?n.appendChild(g):e.parentNode.insertBefore(g,be?Ne:e),ce&&un(ce,0,de-ce.scrollTop),L=g.parentNode,we!==void 0&&!vt&&(yt=Math.abs(we-O(e)[pe])),S(),v(!0)}if(n.contains(g))return v(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){T(document,"mousemove",this._onTouchMove),T(document,"touchmove",this._onTouchMove),T(document,"pointermove",this._onTouchMove),T(document,"dragover",Ke),T(document,"mousemove",Ke),T(document,"touchmove",Ke)},_offUpEvents:function(){var t=this.el.ownerDocument;T(t,"mouseup",this._onDrop),T(t,"touchend",this._onDrop),T(t,"pointerup",this._onDrop),T(t,"pointercancel",this._onDrop),T(t,"touchcancel",this._onDrop),T(document,"selectstart",this)},_onDrop:function(t){var n=this.el,e=this.options;if(le=X(g),Te=X(g,e.draggable),re("drop",this,{evt:t}),L=g&&g.parentNode,le=X(g),Te=X(g,e.draggable),C.eventCanceled){this._nulling();return}Xe=!1,vt=!1,nt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ht(this.cloneId),Ht(this._dragStartId),this.nativeDraggable&&(T(document,"drop",this),T(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Ue&&E(document.body,"user-select",""),E(g,"transform",""),t&&(et&&(t.cancelable&&t.preventDefault(),!e.dropBubble&&t.stopPropagation()),_&&_.parentNode&&_.parentNode.removeChild(_),(I===L||Q&&Q.lastPutMode!=="clone")&&K&&K.parentNode&&K.parentNode.removeChild(K),g&&(this.nativeDraggable&&T(g,"dragend",this),zt(g),g.style["will-change"]="",et&&!Xe&&H(g,Q?Q.options.ghostClass:this.options.ghostClass,!1),H(g,this.options.chosenClass,!1),te({sortable:this,name:"unchoose",toEl:L,newIndex:null,newDraggableIndex:null,originalEvent:t}),I!==L?(le>=0&&(te({rootEl:L,name:"add",toEl:L,fromEl:I,originalEvent:t}),te({sortable:this,name:"remove",toEl:L,originalEvent:t}),te({rootEl:L,name:"sort",toEl:L,fromEl:I,originalEvent:t}),te({sortable:this,name:"sort",toEl:L,originalEvent:t})),Q&&Q.save()):le!==He&&le>=0&&(te({sortable:this,name:"update",toEl:L,originalEvent:t}),te({sortable:this,name:"sort",toEl:L,originalEvent:t})),C.active&&((le==null||le===-1)&&(le=He,Te=Je),te({sortable:this,name:"end",toEl:L,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){re("nulling",this),I=g=L=_=Ie=K=pt=xe=Pe=fe=et=le=Te=He=Je=$e=tt=Q=gt=C.dragged=C.ghost=C.clone=C.active=null,Et.forEach(function(t){t.checked=!0}),Et.length=Kt=Rt=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":g&&(this._onDragOver(t),fo(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],n,e=this.el.children,r=0,i=e.length,a=this.options;r<i;r++)n=e[r],oe(n,a.draggable,this.el,!1)&&t.push(n.getAttribute(a.dataIdAttr)||vo(n));return t},sort:function(t,n){var e={},r=this.el;this.toArray().forEach(function(i,a){var s=r.children[a];oe(s,this.options.draggable,r,!1)&&(e[i]=s)},this),n&&this.captureAnimationState(),t.forEach(function(i){e[i]&&(r.removeChild(e[i]),r.appendChild(e[i]))}),n&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return oe(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var e=this.options;if(n===void 0)return e[t];var r=qe.modifyOption(this,t,n);typeof r<"u"?e[t]=r:e[t]=n,t==="group"&&yn(e)},destroy:function(){re("destroy",this);var t=this.el;t[U]=null,T(t,"mousedown",this._onTapStart),T(t,"touchstart",this._onTapStart),T(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(T(t,"dragover",this),T(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),bt.splice(bt.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!xe){if(re("hideClone",this),C.eventCanceled)return;E(K,"display","none"),this.options.removeCloneOnHide&&K.parentNode&&K.parentNode.removeChild(K),xe=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(xe){if(re("showClone",this),C.eventCanceled)return;g.parentNode==I&&!this.options.group.revertClone?I.insertBefore(K,g):Ie?I.insertBefore(K,Ie):I.appendChild(K),this.options.group.revertClone&&this.animate(g,K),E(K,"display",""),xe=!1}}};function fo(o){o.dataTransfer&&(o.dataTransfer.dropEffect="move"),o.cancelable&&o.preventDefault()}function St(o,t,n,e,r,i,a,s){var c,d=o[U],h=d.options.onMove,f;return window.CustomEvent&&!Ee&&!je?c=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(c=document.createEvent("Event"),c.initEvent("move",!0,!0)),c.to=t,c.from=o,c.dragged=n,c.draggedRect=e,c.related=r||t,c.relatedRect=i||O(t),c.willInsertAfter=s,c.originalEvent=a,o.dispatchEvent(c),h&&(f=h.call(d,c,a)),f}function zt(o){o.draggable=!1}function ho(){Lt=!1}function po(o,t,n){var e=O(Le(n.el,0,n.options,!0)),r=hn(n.el,n.options,_),i=10;return t?o.clientX<r.left-i||o.clientY<e.top&&o.clientX<e.right:o.clientY<r.top-i||o.clientY<e.bottom&&o.clientX<e.left}function go(o,t,n){var e=O(Nt(n.el,n.options.draggable)),r=hn(n.el,n.options,_),i=10;return t?o.clientX>r.right+i||o.clientY>e.bottom&&o.clientX>e.left:o.clientY>r.bottom+i||o.clientX>e.right&&o.clientY>e.top}function mo(o,t,n,e,r,i,a,s){var c=e?o.clientY:o.clientX,d=e?n.height:n.width,h=e?n.top:n.left,f=e?n.bottom:n.right,b=!1;if(!a){if(s&&yt<d*r){if(!nt&&(tt===1?c>h+d*i/2:c<f-d*i/2)&&(nt=!0),nt)b=!0;else if(tt===1?c<h+yt:c>f-yt)return-tt}else if(c>h+d*(1-r)/2&&c<f-d*(1-r)/2)return bo(t)}return b=b||a,b&&(c<h+d*i/2||c>f-d*i/2)?c>h+d/2?1:-1:0}function bo(o){return X(g)<X(o)?1:-1}function vo(o){for(var t=o.tagName+o.className+o.src+o.href+o.textContent,n=t.length,e=0;n--;)e+=t.charCodeAt(n);return e.toString(36)}function yo(o){Et.length=0;for(var t=o.getElementsByTagName("input"),n=t.length;n--;){var e=t[n];e.checked&&Et.push(e)}}function _t(o){return setTimeout(o,0)}function Ht(o){return clearTimeout(o)}wt&&A(document,"touchmove",function(o){(C.active||Xe)&&o.cancelable&&o.preventDefault()}),C.utils={on:A,off:T,css:E,find:ln,is:function(t,n){return!!oe(t,n,t,!1)},extend:to,throttle:dn,closest:oe,toggleClass:H,clone:Ot,index:X,nextTick:_t,cancelNextTick:Ht,detectDirection:vn,getChild:Le,expando:U},C.get=function(o){return o[U]},C.mount=function(){for(var o=arguments.length,t=new Array(o),n=0;n<o;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(C.utils=ge(ge({},C.utils),e.utils)),qe.mount(e)})},C.create=function(o,t){return new C(o,t)},C.version=Jn;var $=[],ot,Xt,$t=!1,Yt,Vt,Dt,rt;function Eo(){function o(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return o.prototype={dragStarted:function(n){var e=n.originalEvent;this.sortable.nativeDraggable?A(document,"dragover",this._handleAutoScroll):this.options.supportPointer?A(document,"pointermove",this._handleFallbackAutoScroll):e.touches?A(document,"touchmove",this._handleFallbackAutoScroll):A(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var e=n.originalEvent;!this.options.dragOverBubble&&!e.rootEl&&this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?T(document,"dragover",this._handleAutoScroll):(T(document,"pointermove",this._handleFallbackAutoScroll),T(document,"touchmove",this._handleFallbackAutoScroll),T(document,"mousemove",this._handleFallbackAutoScroll)),Cn(),kt(),no()},nulling:function(){Dt=Xt=ot=$t=rt=Yt=Vt=null,$.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,e){var r=this,i=(n.touches?n.touches[0]:n).clientX,a=(n.touches?n.touches[0]:n).clientY,s=document.elementFromPoint(i,a);if(Dt=n,e||this.options.forceAutoScrollFallback||je||Ee||Ue){Gt(n,this.options,s,e);var c=ke(s,!0);$t&&(!rt||i!==Yt||a!==Vt)&&(rt&&Cn(),rt=setInterval(function(){var d=ke(document.elementFromPoint(i,a),!0);d!==c&&(c=d,kt()),Gt(n,r.options,d,e)},10),Yt=i,Vt=a)}else{if(!this.options.bubbleScroll||ke(s,!0)===me()){kt();return}Gt(n,this.options,ke(s,!1),!1)}}},ue(o,{pluginName:"scroll",initializeByDefault:!0})}function kt(){$.forEach(function(o){clearInterval(o.pid)}),$=[]}function Cn(){clearInterval(rt)}var Gt=dn(function(o,t,n,e){if(t.scroll){var r=(o.touches?o.touches[0]:o).clientX,i=(o.touches?o.touches[0]:o).clientY,a=t.scrollSensitivity,s=t.scrollSpeed,c=me(),d=!1,h;Xt!==n&&(Xt=n,kt(),ot=t.scroll,h=t.scrollFn,ot===!0&&(ot=ke(n,!0)));var f=0,b=ot;do{var y=b,w=O(y),x=w.top,z=w.bottom,W=w.left,v=w.right,S=w.width,R=w.height,J=void 0,ae=void 0,we=y.scrollWidth,Me=y.scrollHeight,ee=E(y),pe=y.scrollLeft,ce=y.scrollTop;y===c?(J=S<we&&(ee.overflowX==="auto"||ee.overflowX==="scroll"||ee.overflowX==="visible"),ae=R<Me&&(ee.overflowY==="auto"||ee.overflowY==="scroll"||ee.overflowY==="visible")):(J=S<we&&(ee.overflowX==="auto"||ee.overflowX==="scroll"),ae=R<Me&&(ee.overflowY==="auto"||ee.overflowY==="scroll"));var de=J&&(Math.abs(v-r)<=a&&pe+S<we)-(Math.abs(W-r)<=a&&!!pe),F=ae&&(Math.abs(z-i)<=a&&ce+R<Me)-(Math.abs(x-i)<=a&&!!ce);if(!$[f])for(var Ce=0;Ce<=f;Ce++)$[Ce]||($[Ce]={});($[f].vx!=de||$[f].vy!=F||$[f].el!==y)&&($[f].el=y,$[f].vx=de,$[f].vy=F,clearInterval($[f].pid),(de!=0||F!=0)&&(d=!0,$[f].pid=setInterval((function(){e&&this.layer===0&&C.active._onTouchMove(Dt);var Ne=$[this.layer].vy?$[this.layer].vy*s:0,be=$[this.layer].vx?$[this.layer].vx*s:0;typeof h=="function"&&h.call(C.dragged.parentNode[U],be,Ne,o,Dt,$[this.layer].el)!=="continue"||un($[this.layer].el,be,Ne)}).bind({layer:f}),24))),f++}while(t.bubbleScroll&&b!==c&&(b=ke(b,!1)));$t=d}},30),Sn=function(t){var n=t.originalEvent,e=t.putSortable,r=t.dragEl,i=t.activeSortable,a=t.dispatchSortableEvent,s=t.hideGhostForTarget,c=t.unhideGhostForTarget;if(n){var d=e||i;s();var h=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,f=document.elementFromPoint(h.clientX,h.clientY);c(),d&&!d.el.contains(f)&&(a("spill"),this.onSpill({dragEl:r,putSortable:e}))}};function Wt(){}Wt.prototype={startIndex:null,dragStart:function(t){var n=t.oldDraggableIndex;this.startIndex=n},onSpill:function(t){var n=t.dragEl,e=t.putSortable;this.sortable.captureAnimationState(),e&&e.captureAnimationState();var r=Le(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(n,r):this.sortable.el.appendChild(n),this.sortable.animateAll(),e&&e.animateAll()},drop:Sn},ue(Wt,{pluginName:"revertOnSpill"});function jt(){}jt.prototype={onSpill:function(t){var n=t.dragEl,e=t.putSortable,r=e||this.sortable;r.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),r.animateAll()},drop:Sn},ue(jt,{pluginName:"removeOnSpill"});var D=[],se=[],it,he,at=!1,ie=!1,Ye=!1,B,lt,xt;function wo(){function o(t){for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));t.options.avoidImplicitDeselect||(t.options.supportPointer?A(document,"pointerup",this._deselectMultiDrag):(A(document,"mouseup",this._deselectMultiDrag),A(document,"touchend",this._deselectMultiDrag))),A(document,"keydown",this._checkKeyDown),A(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,avoidImplicitDeselect:!1,setData:function(r,i){var a="";D.length&&he===t?D.forEach(function(s,c){a+=(c?", ":"")+s.textContent}):a=i.textContent,r.setData("Text",a)}}}return o.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(n){var e=n.dragEl;B=e},delayEnded:function(){this.isMultiDrag=~D.indexOf(B)},setupClone:function(n){var e=n.sortable,r=n.cancel;if(this.isMultiDrag){for(var i=0;i<D.length;i++)se.push(Ot(D[i])),se[i].sortableIndex=D[i].sortableIndex,se[i].draggable=!1,se[i].style["will-change"]="",H(se[i],this.options.selectedClass,!1),D[i]===B&&H(se[i],this.options.chosenClass,!1);e._hideClone(),r()}},clone:function(n){var e=n.sortable,r=n.rootEl,i=n.dispatchSortableEvent,a=n.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||D.length&&he===e&&(_n(!0,r),i("clone"),a()))},showClone:function(n){var e=n.cloneNowShown,r=n.rootEl,i=n.cancel;this.isMultiDrag&&(_n(!1,r),se.forEach(function(a){E(a,"display","")}),e(),xt=!1,i())},hideClone:function(n){var e=this;n.sortable;var r=n.cloneNowHidden,i=n.cancel;this.isMultiDrag&&(se.forEach(function(a){E(a,"display","none"),e.options.removeCloneOnHide&&a.parentNode&&a.parentNode.removeChild(a)}),r(),xt=!0,i())},dragStartGlobal:function(n){n.sortable,!this.isMultiDrag&&he&&he.multiDrag._deselectMultiDrag(),D.forEach(function(e){e.sortableIndex=X(e)}),D=D.sort(function(e,r){return e.sortableIndex-r.sortableIndex}),Ye=!0},dragStarted:function(n){var e=this,r=n.sortable;if(this.isMultiDrag){if(this.options.sort&&(r.captureAnimationState(),this.options.animation)){D.forEach(function(a){a!==B&&E(a,"position","absolute")});var i=O(B,!1,!0,!0);D.forEach(function(a){a!==B&&fn(a,i)}),ie=!0,at=!0}r.animateAll(function(){ie=!1,at=!1,e.options.animation&&D.forEach(function(a){It(a)}),e.options.sort&&Tt()})}},dragOver:function(n){var e=n.target,r=n.completed,i=n.cancel;ie&&~D.indexOf(e)&&(r(!1),i())},revert:function(n){var e=n.fromSortable,r=n.rootEl,i=n.sortable,a=n.dragRect;D.length>1&&(D.forEach(function(s){i.addAnimationState({target:s,rect:ie?O(s):a}),It(s),s.fromRect=a,e.removeAnimationState(s)}),ie=!1,Co(!this.options.removeCloneOnHide,r))},dragOverCompleted:function(n){var e=n.sortable,r=n.isOwner,i=n.insertion,a=n.activeSortable,s=n.parentEl,c=n.putSortable,d=this.options;if(i){if(r&&a._hideClone(),at=!1,d.animation&&D.length>1&&(ie||!r&&!a.options.sort&&!c)){var h=O(B,!1,!0,!0);D.forEach(function(b){b!==B&&(fn(b,h),s.appendChild(b))}),ie=!0}if(!r)if(ie||Tt(),D.length>1){var f=xt;a._showClone(e),a.options.animation&&!xt&&f&&se.forEach(function(b){a.addAnimationState({target:b,rect:lt}),b.fromRect=lt,b.thisAnimationDuration=null})}else a._showClone(e)}},dragOverAnimationCapture:function(n){var e=n.dragRect,r=n.isOwner,i=n.activeSortable;if(D.forEach(function(s){s.thisAnimationDuration=null}),i.options.animation&&!r&&i.multiDrag.isMultiDrag){lt=ue({},e);var a=Oe(B,!0);lt.top-=a.f,lt.left-=a.e}},dragOverAnimationComplete:function(){ie&&(ie=!1,Tt())},drop:function(n){var e=n.originalEvent,r=n.rootEl,i=n.parentEl,a=n.sortable,s=n.dispatchSortableEvent,c=n.oldIndex,d=n.putSortable,h=d||this.sortable;if(e){var f=this.options,b=i.children;if(!Ye)if(f.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),H(B,f.selectedClass,!~D.indexOf(B)),~D.indexOf(B))D.splice(D.indexOf(B),1),it=null,Ze({sortable:a,rootEl:r,name:"deselect",targetEl:B,originalEvent:e});else{if(D.push(B),Ze({sortable:a,rootEl:r,name:"select",targetEl:B,originalEvent:e}),e.shiftKey&&it&&a.el.contains(it)){var y=X(it),w=X(B);~y&&~w&&y!==w&&function(){var v,S;w>y?(S=y,v=w):(S=w,v=y+1);for(var R=f.filter;S<v;S++)if(!~D.indexOf(b[S])&&oe(b[S],f.draggable,i,!1)){var J=R&&(typeof R=="function"?R.call(a,e,b[S],a):R.split(",").some(function(ae){return oe(b[S],ae.trim(),i,!1)}));J||(H(b[S],f.selectedClass,!0),D.push(b[S]),Ze({sortable:a,rootEl:r,name:"select",targetEl:b[S],originalEvent:e}))}}()}else it=B;he=h}if(Ye&&this.isMultiDrag){if(ie=!1,(i[U].options.sort||i!==r)&&D.length>1){var x=O(B),z=X(B,":not(."+this.options.selectedClass+")");if(!at&&f.animation&&(B.thisAnimationDuration=null),h.captureAnimationState(),!at&&(f.animation&&(B.fromRect=x,D.forEach(function(v){if(v.thisAnimationDuration=null,v!==B){var S=ie?O(v):x;v.fromRect=S,h.addAnimationState({target:v,rect:S})}})),Tt(),D.forEach(function(v){b[z]?i.insertBefore(v,b[z]):i.appendChild(v),z++}),c===X(B))){var W=!1;D.forEach(function(v){if(v.sortableIndex!==X(v)){W=!0;return}}),W&&(s("update"),s("sort"))}D.forEach(function(v){It(v)}),h.animateAll()}he=h}(r===i||d&&d.lastPutMode!=="clone")&&se.forEach(function(v){v.parentNode&&v.parentNode.removeChild(v)})}},nullingGlobal:function(){this.isMultiDrag=Ye=!1,se.length=0},destroyGlobal:function(){this._deselectMultiDrag(),T(document,"pointerup",this._deselectMultiDrag),T(document,"mouseup",this._deselectMultiDrag),T(document,"touchend",this._deselectMultiDrag),T(document,"keydown",this._checkKeyDown),T(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(n){if(!(typeof Ye<"u"&&Ye)&&he===this.sortable&&!(n&&oe(n.target,this.options.draggable,this.sortable.el,!1))&&!(n&&n.button!==0))for(;D.length;){var e=D[0];H(e,this.options.selectedClass,!1),D.shift(),Ze({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:e,originalEvent:n})}},_checkKeyDown:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},ue(o,{pluginName:"multiDrag",utils:{select:function(n){var e=n.parentNode[U];!e||!e.options.multiDrag||~D.indexOf(n)||(he&&he!==e&&(he.multiDrag._deselectMultiDrag(),he=e),H(n,e.options.selectedClass,!0),D.push(n))},deselect:function(n){var e=n.parentNode[U],r=D.indexOf(n);!e||!e.options.multiDrag||!~r||(H(n,e.options.selectedClass,!1),D.splice(r,1))}},eventProperties:function(){var n=this,e=[],r=[];return D.forEach(function(i){e.push({multiDragElement:i,index:i.sortableIndex});var a;ie&&i!==B?a=-1:ie?a=X(i,":not(."+n.options.selectedClass+")"):a=X(i),r.push({multiDragElement:i,index:a})}),{items:jn(D),clones:[].concat(se),oldIndicies:e,newIndicies:r}},optionListeners:{multiDragKey:function(n){return n=n.toLowerCase(),n==="ctrl"?n="Control":n.length>1&&(n=n.charAt(0).toUpperCase()+n.substr(1)),n}}})}function Co(o,t){D.forEach(function(n,e){var r=t.children[n.sortableIndex+(o?Number(e):0)];r?t.insertBefore(n,r):t.appendChild(n)})}function _n(o,t){se.forEach(function(n,e){var r=t.children[n.sortableIndex+(o?Number(e):0)];r?t.insertBefore(n,r):t.appendChild(n)})}function Tt(){D.forEach(function(o){o!==B&&o.parentNode&&o.parentNode.removeChild(o)})}C.mount(new Eo),C.mount(jt,Wt);const Ae="data-key",Re="__tree-table-fake-row-",st="__tree-table-null-hierarchy-key",So=l.defineComponent({__name:"Mangrove64Tree",props:{nodes:{},columns:{},draggable:{type:Boolean,default:!1},nodeKey:{default:"id"},childrenKey:{default:"children"},parentKey:{default:"parent_id"},hasChildrenKey:{default:"has_children"},disabledKey:{},orderKey:{},expandedNodeAtStart:{},expandeAllNodeAtStart:{type:Boolean,default:!1},selectedNodeAtStart:{},selectionMode:{default:"unique"},contextMenu:{},resizableColumns:{type:Boolean,default:!1},indentationPx:{default:25},borderStrategy:{default:"none"},tableCssClass:{default:""},rowCssClass:{default:""},cellCssClass:{default:""},nodeKeyType:{default:"number"},checkboxColor:{default:"primary"}},emits:["node-expand","node-collapse","node-select","node-unselect","lazy-load-children","node-move"],setup(o,{expose:t,emit:n}){const e=o,r=n;let i=null;const a=l.useSlots(),s=new Map,c=new Map,d=new Map,h=l.ref([]),f=l.ref(e.columns),b=l.ref(new Set),y=l.ref(new Set),w=l.ref(new Map),x=l.ref(new Set),z=l.ref(new Set),W=l.ref(null),v=l.ref(!1),S=l.ref(!1),R=l.ref(0),J=we(W);function ae(){var u,m;c.set(st,{parent:st+"-unknown",children:[]}),h.value=ee(e.nodes,0,st,[])[0],e.expandeAllNodeAtStart?h.value.forEach(p=>{b.value.add(Y(p))}):(u=e.expandedNodeAtStart)==null||u.forEach(p=>{b.value.add(p)}),(m=e.selectedNodeAtStart)==null||m.forEach(p=>{F(p,!0)}),J.start()}function we(u){let m;const p={multiDrag:!0,dataIdAttr:"node-key",onStart:()=>{S.value=!0},onEnd:M=>{const N=M.item.getAttribute(Ae);if(!N){S.value=!1;return}if(!y.value.has(de(N))){S.value=!1;return}if(N.includes(Re)){S.value=!1;return}if(!i){S.value=!1;return}const V=i.includes(Re)?"brother-to-previous":"child-to-previous",q=de(i.replaceAll(Re,"")),Se=c.get(q);if(!Se){S.value=!1;return}let qt=!1;if([...y.value].sort((G,j)=>(d.get(G)??0)-(d.get(j)??0)).forEach(G=>{const j=c.get(G);if(!j)return;if(y.value.has(j.parent)){const ne=w.value.get(j.parent)??-1;w.value.set(G,ne+1);return}const We=c.get(j.parent);We&&(We.children=We.children.filter(ne=>ne!==G));let ve=-1;if(V==="brother-to-previous"){j.parent=Se.parent;const ne=c.get(Se.parent);ne&&(ve=ne.children.findIndex(Zt=>Zt===q),ve!==-1&&(ve+=1),ne.children.splice(ve,0,G))}else if(V==="child-to-previous"){j.parent=q;const ne=c.get(q);ne&&ne.children.unshift(G)}if(ve!==-1){const ne=j.parent===st?null:j.parent,Zt=Me(G,0),Po=d.get(G)??0,dt=h.value.splice(Po,Zt+1);pe();const Ko=d.get(q)??0;if(ne!==null){const Nn=d.get(ne);if(Nn!==void 0){const Bn=h.value[Nn];let ut=[];qt?ut=ut.concat(Qt(Bn)):(ut=[],qt=!0),ut.push(dt[0]),ct(Bn,ut)}}Ut(dt[0],ne),_o(dt[0],ve),h.value.splice(Ko+1,0,...dt),pe(),r("node-move",dt[0],ne,ve)}}),V==="child-to-previous"){const G=s.get(Ge(q));if(G&&G.parentElement){const j=G.parentElement;j.removeChild(G),j.insertBefore(G,M.item)}}S.value=!1,i=null,R.value++,l.nextTick(()=>{s.clear(),ce(h.value),J.stop(),J.start(),y.value.forEach(G=>{F(G,!0)})})},onSelect:M=>{const N=M.item.getAttribute(Ae);if(!N)return!1;y.value.has(N)||C.utils.deselect(M.item)},onDeselect:M=>{const N=M.item.getAttribute(Ae);if(!N)return!1;y.value.has(N)&&C.utils.select(M.item)},onMove:M=>{var G;const N=M.dragged.getAttribute(Ae);if(!N||!y.value.has(de(N))||N.includes(Re))return!1;const V=M.willInsertAfter?M.related.getAttribute(Ae):(G=M.related.previousElementSibling)==null?void 0:G.getAttribute(Ae);if(!V)return!1;i=V;const q=V.includes(Re)?"brother-to-previous":"child-to-previous",Se=q==="child-to-previous"&&M.willInsertAfter?de(V):de(V.replaceAll(Re,""));if(!c.get(Se))return!1;[...y.value].sort((j,We)=>(d.get(j)??0)-(d.get(We)??0)).forEach(j=>{if(!c.get(j))return;const ve=w.value.get(Se)??0;q==="brother-to-previous"?w.value.set(j,ve):q==="child-to-previous"&&w.value.set(j,ve+1)})}};return{stop:()=>{e.draggable&&(m==null||m.destroy(),m=void 0)},start:()=>{if(!(!e.draggable||u.value===null)){try{C.mount(new wo)}catch{}m=new C(u.value,{...p})}}}}function Me(u,m){const p=c.get(u);return p&&p.children.forEach(k=>{m++,m=Me(k,m)}),m}function ee(u,m,p,k){const P=[];return u.sort((M,N)=>xn(N)-xn(M)).forEach(M=>{const N=Y(M);k.push(M),d.set(N,k.length-1);const V=ee(Qt(M),m+1,N,k);c.set(N,{parent:p,children:V[1]});const q=c.get(p);q&&q.children.push(N),w.value.set(N,m),k=V[0]}),[k,P]}function pe(){d.clear(),h.value.forEach((u,m)=>{const p=Y(u);d.set(p,m)})}function ce(u){if(!W.value)return;const m=[...W.value.querySelectorAll(".tree-table-row")];u.forEach(p=>{const k=Y(p),P=m.find(N=>{const V=N.getAttribute(Ae);return de(V)===k});if(!P)return;s.set(k,P);const M=m.find(N=>{const V=N.getAttribute(Ae);return(V==null?void 0:V.toString())===Ge(k)});M&&s.set(Ge(k),M)})}function de(u){switch(e.nodeKeyType){case"string":return u??"";case"symbol":return Symbol(u==null?void 0:u.toString());case"number":return Number(u)}}function F(u,m){if(m){y.value.add(u);const p=s.get(u),k=s.get(Ge(u));p&&k&&e.draggable&&(C.utils.select(p),C.utils.select(k))}else{y.value.delete(u);const p=s.get(u),k=s.get(Ge(u));p&&k&&e.draggable&&(C.utils.deselect(p),C.utils.deselect(k))}}function Ce(){y.value.forEach(u=>{const m=s.get(u);m&&C.utils.deselect(m)}),y.value.clear()}function Ne(u){var k;let m=()=>{};const p=Y(u);switch(e.selectionMode){case"unique":Ce(),F(p,!0),m=()=>r("node-select",u);break;case"multiple":{const P=y.value.has(p);if(P)F(p,!1),m=()=>r("node-unselect",u);else{F(p,!0);const M=(k=c.get(p))==null?void 0:k.parent;M&&F(M,P),m=()=>r("node-select",u)}Ve(p,P);break}case"checkbox":return}m()}function be(u,m){if(m){if(b.value.add(Y(u)),r("node-expand",u),Do(u))return;if(Qt(u).length>0){const p=Dn(u);if(!p)return;Be(p,!1,!1)}else{const p=Y(u);z.value.add(p),r("lazy-load-children",{node:u,nodeKey:p,done:P=>{const M=d.get(p);if(M===void 0)return;const N=c.get(p);c.set(p,{parent:(N==null?void 0:N.parent)??st,children:P.map(q=>Y(q))});const V=w.value.get(p)??0;P.forEach(q=>{const Se=Y(q);c.set(Se,{parent:p,children:[]}),w.value.set(Se,V+1)}),ct(u,P),h.value.splice(M+1,0,...P),pe(),l.nextTick(()=>{ce(P),y.value.has(p)&&(F(p,!0),Ve(p,!0))})}}),z.value.delete(p)}}else{b.value.delete(Y(u)),r("node-collapse",u);const p=Dn(u);if(!p)return;Be(p,!0,!0)}}function Be(u,m,p){u.children.forEach(k=>{if(m?(x.value.add(k),F(k,!m)):x.value.delete(k),p){const P=c.get(k);P&&Be(P,m,p)}})}function Fe(u,m){var P;let p=()=>{};const k=Y(u);switch(e.selectionMode){case"checkbox":if(m)F(k,m),p=()=>r("node-select",u);else{F(k,m);const M=(P=c.get(k))==null?void 0:P.parent;M&&F(M,m),p=()=>r("node-unselect",u)}Ve(k,m);break;case"multiple":case"unique":return}p()}function Ve(u,m){const p=c.get(u);p&&p.children.forEach(k=>{m?F(k,!0):F(k,!1),Ve(k,m)})}function Ge(u){return`${Re}${u.toString()}`}function ct(u,m){u[e.childrenKey]=m}function Ut(u,m){e.parentKey&&(u[e.parentKey]=m)}function _o(u,m){e.orderKey&&(u[e.orderKey]=m)}function Qt(u){return u[e.childrenKey]??[]}function Y(u){return u[e.nodeKey]}function Dn(u){const m=Y(u);return c.get(m)}function kn(u){const m=Y(u);return w.value.get(m)??0}function xn(u){return u[e.orderKey]??0}function Do(u){return!u[e.hasChildrenKey]}function Tn(u){const m=Y(u);return b.value.has(m)}function An(u){const m=Y(u);return y.value.has(m)}function ko(u){const m=Y(u);return z.value.has(m)}function Mn(u){const m=Y(u);return x.value.has(m)}function xo(u){return h.value.find(m=>Y(m)===u)}function To(u,m){const p=d.get(u);p!==void 0&&(h.value[p]=m)}function Ao(u,m,p){const k=Y(u),P=c.get(m);P&&P.children.push(k),c.set(k,{parent:m,children:[]}),w.value.set(k,(w.value.get(m)??0)+1),x.value.has(m)&&x.value.add(k);const M=d.get(m);M===void 0?h.value.splice(p,0,u):h.value.splice(M+Math.abs(p),0,u),l.nextTick(()=>{ce([u])}),pe()}function Mo(u){const m=c.get(u);!m||m.children.length>0||(h.value=h.value.filter(p=>Y(p)!==u),s.delete(u),c.delete(u),b.value.delete(u),y.value.delete(u),w.value.delete(u),x.value.delete(u),pe())}function No(){return y.value}function Bo(){return b.value}const Oo=l.computed(()=>{let u="";return u+=e.tableCssClass,u}),Io=l.computed(()=>{const u=new Map;for(const m in a){const p=a[m];p&&u.set(m,p)}return u});return t({getSelectedKeys:No,getExpandedKeys:Bo,getNodeByKey:xo,updateNode:To,addNode:Ao,removeNode:Mo}),l.watch(()=>e.columns,u=>{f.value=u}),l.onMounted(()=>{ae(),l.nextTick(()=>{ce(h.value),v.value=!0})}),l.onScopeDispose(()=>{J.stop()}),(u,m)=>(l.openBlock(),l.createElementBlock("div",null,[l.createElementVNode("div",null,[l.createElementVNode("table",{class:l.normalizeClass(["tree-table-table",Oo.value])},[l.createElementVNode("thead",null,[l.createElementVNode("tr",null,[(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(f.value,(p,k)=>(l.openBlock(),l.createBlock(On,{key:p.fieldTarget,column:p,resizableColumns:e.resizableColumns,index:k,borderStrategy:e.borderStrategy},null,8,["column","resizableColumns","index","borderStrategy"]))),128))])]),(l.openBlock(),l.createElementBlock("tbody",{ref_key:"treeBodyEl",ref:W,key:R.value},[(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(h.value,p=>(l.openBlock(),l.createElementBlock(l.Fragment,{key:p[e.nodeKey]},[l.createVNode(Hn,{node:p,columns:o.columns,"node-key":e.nodeKey,"children-key":e.childrenKey,"has-children-key":e.hasChildrenKey,"disabled-key":e.disabledKey,selectionMode:e.selectionMode,expanded:Tn(p),selected:An(p),isLoading:ko(p),level:kn(p),hidden:Mn(p),indentationPx:e.indentationPx,"row-css-class":e.rowCssClass,"cell-css-class":e.cellCssClass,"border-strategy":e.borderStrategy,"context-menu":e.contextMenu,"slot-map":Io.value,"checkbox-color":e.checkboxColor,onNodeExpandToggle:be,onNodeCheckboxToggle:Fe,onNodeClick:Ne},null,8,["node","columns","node-key","children-key","has-children-key","disabled-key","selectionMode","expanded","selected","isLoading","level","hidden","indentationPx","row-css-class","cell-css-class","border-strategy","context-menu","slot-map","checkbox-color"]),l.createVNode(Yn,{node:p,columns:o.columns,"node-key":e.nodeKey,"disabled-key":e.disabledKey,expanded:Tn(p),selected:An(p),level:kn(p),hidden:Mn(p),indentationPx:e.indentationPx,"row-css-class":e.rowCssClass,"cell-css-class":e.cellCssClass,"border-strategy":e.borderStrategy,"context-menu":e.contextMenu,"is-dragging":S.value,onNodeClick:Ne},null,8,["node","columns","node-key","disabled-key","expanded","selected","level","hidden","indentationPx","row-css-class","cell-css-class","border-strategy","context-menu","is-dragging"])],64))),128))]))],2)])]))}});_e.Mangrove64Tree=So,Object.defineProperty(_e,Symbol.toStringTag,{value:"Module"})});
