(function(_e,l){typeof exports=="object"&&typeof module<"u"?l(exports,require("vue"),require("quasar")):typeof define=="function"&&define.amd?define(["exports","vue","quasar"],l):(_e=typeof globalThis<"u"?globalThis:_e||self,l(_e["mangrove64-vue"]={},_e.Vue,_e.Quasar))})(this,function(_e,l,dt){"use strict";const Mn=l.defineComponent({__name:"TreeTableHeaderCell",props:{column:{},index:{},resizableColumns:{type:Boolean},borderStrategy:{}},setup(o){const t=o,n=l.ref(null),e=l.ref(null);let r=0,i=0,a=!1;function s(v){v.button===0&&(d(v.clientX),v.preventDefault())}function c(v){const S=v.touches[0];S&&(d(S.clientX),v.preventDefault())}function d(v){const S=n.value;S&&(r=v,i=S.getBoundingClientRect().width,a=!0,document.body.style.cursor="col-resize",document.body.style.userSelect="none",document.addEventListener("mousemove",h),document.addEventListener("mouseup",y),document.addEventListener("touchmove",f,{passive:!1}),document.addEventListener("touchend",w))}function h(v){a&&b(v.clientX)}function f(v){if(!a)return;const S=v.touches[0];S&&(b(S.clientX),v.preventDefault())}function b(v){const S=n.value;if(!S)return;const K=v-r,J=Math.max(60,Math.round(i+K));S.style.width=`${J}px`}function y(){k()}function w(){k()}function k(){a&&(a=!1,document.body.style.cursor="",document.body.style.userSelect="",document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",y),document.removeEventListener("touchmove",f),document.removeEventListener("touchend",w))}const z=l.computed(()=>`text-align: ${t.column.align??"left"};`),W=l.computed(()=>{let v="";return t.borderStrategy!=="none"&&(v+=" tree-table-bordered-ltrb"),v});return l.onMounted(()=>{if(!t.resizableColumns)return;const v=e.value;v&&(v.addEventListener("mousedown",s),v.addEventListener("touchstart",c,{passive:!1}))}),l.onBeforeUnmount(()=>{if(!t.resizableColumns)return;const v=e.value;v&&(v.removeEventListener("mousedown",s),v.removeEventListener("touchstart",c)),k()}),(v,S)=>(l.openBlock(),l.createElementBlock("th",{class:l.normalizeClass(["tree-table-cell-header",W.value]),ref_key:"thEl",ref:n},[l.createElementVNode("div",{class:"tree-table-cell-header-content",style:l.normalizeStyle(z.value)},[l.createTextVNode(l.toDisplayString(t.column.label)+" ",1),t.resizableColumns?(l.openBlock(),l.createElementBlock("div",{key:0,class:"tree-table-resize-handle",ref_key:"handle",ref:e},null,512)):l.createCommentVNode("",!0)],4)],2))}}),In={key:1,class:"tree-table-cell-inner"},Bn=l.defineComponent({__name:"TreeTableBodyCell",props:{node:{},column:{},cellCssClass:{},borderStrategy:{},slotRender:{}},setup(o){const t=o,n=l.computed(()=>{if(t.column.format)return t.column.format(t.node);if(t.column.fieldTarget)return t.node[t.column.fieldTarget]}),e=l.computed(()=>{let r="tree-table-cell";switch(r+=` ${t.cellCssClass}`,t.column.cssClass&&(r+=` ${t.column.cssClass}`),t.borderStrategy){case"horizontal":r+=" tree-table-bordered-t";break;case"vertical":r+=" tree-table-bordered-lr";break;case"cell":r+=" tree-table-bordered-ltr";break}return r});return(r,i)=>(l.openBlock(),l.createElementBlock("td",{class:l.normalizeClass(e.value)},[t.slotRender?(l.openBlock(),l.createBlock(l.resolveDynamicComponent({render:()=>t.slotRender({node:t.node})}),{key:0})):(l.openBlock(),l.createElementBlock("div",In,l.toDisplayString(n.value),1))],2))}}),Pn={class:"flex row no-wrap items-center tree-table-cell-inner"},Kn={key:1,class:"q-pr-xs"},Rn={key:4},Fn=l.defineComponent({__name:"TreeTableBodyFirstRowCell",props:{node:{},column:{},level:{},indentationPx:{},leaf:{type:Boolean},expanded:{type:Boolean},selected:{type:Boolean},isLoading:{type:Boolean},disabled:{type:Boolean},selectionMode:{},cellCssClass:{},borderStrategy:{},slotRender:{},checkboxColor:{}},emits:["node-expand-toggle","node-checkbox-toggle"],setup(o,{emit:t}){const n=t,e=o,r=l.ref(e.selected);function i(){e.disabled||n("node-expand-toggle",e.node,!e.expanded)}function a(){e.disabled||n("node-checkbox-toggle",e.node,!e.selected)}const s=l.computed(()=>e.selectionMode==="checkbox"),c=l.computed(()=>{if(e.column.format)return e.column.format(e.node);if(e.column.fieldTarget)return e.node[e.column.fieldTarget]}),d=l.computed(()=>{let f="tree-table-cell";switch(f+=` ${e.cellCssClass}`,e.column.cssClass&&(f+=` ${e.column.cssClass}`),e.selected&&(f+=" tree-table-selected"),e.borderStrategy){case"horizontal":f+=" tree-table-bordered-t";break;case"vertical":f+=" tree-table-bordered-lr";break;case"cell":f+=" tree-table-bordered-ltr";break}return f}),h=l.computed(()=>`padding-left: ${e.level*e.indentationPx}px;`);return l.watch(()=>e.selected,f=>{r.value=f}),(f,b)=>(l.openBlock(),l.createElementBlock("td",{class:l.normalizeClass(d.value),style:l.normalizeStyle(h.value)},[l.createElementVNode("div",Pn,[s.value?(l.openBlock(),l.createBlock(l.unref(dt.QCheckbox),{key:0,"onUpdate:modelValue":[a,b[0]||(b[0]=y=>r.value=y)],modelValue:r.value,size:"xs",dense:"",color:e.checkboxColor,disabled:e.disabled},null,8,["modelValue","color","disabled"])):l.createCommentVNode("",!0),e.isLoading?(l.openBlock(),l.createBlock(l.unref(dt.QSpinner),{key:2,size:"xs",color:e.checkboxColor,thickness:4},null,8,["color"])):(l.openBlock(),l.createElementBlock(l.Fragment,{key:1},[e.leaf?(l.openBlock(),l.createElementBlock("span",Kn)):(l.openBlock(),l.createElementBlock(l.Fragment,{key:0},[e.expanded?(l.openBlock(),l.createBlock(l.unref(dt.QIcon),{key:1,onClick:i,name:"keyboard_arrow_down",size:"1.2rem",class:"cursor-pointer"})):(l.openBlock(),l.createBlock(l.unref(dt.QIcon),{key:0,onClick:i,name:"chevron_right",size:"1.2rem",class:"cursor-pointer"}))],64))],64)),e.slotRender?(l.openBlock(),l.createBlock(l.resolveDynamicComponent({render:()=>e.slotRender({node:e.node})}),{key:3})):(l.openBlock(),l.createElementBlock("div",Rn,l.toDisplayString(c.value),1))])],6))}}),Ln=["data-key"],zn=l.defineComponent({__name:"TreeTableRow",props:{node:{},columns:{},nodeKey:{},childrenKey:{},hasChildrenKey:{},disabledKey:{},selectionMode:{},expanded:{type:Boolean},selected:{type:Boolean},isLoading:{type:Boolean},hidden:{type:Boolean},level:{},indentationPx:{},borderStrategy:{},rowCssClass:{},cellCssClass:{},slotMap:{},checkboxColor:{}},emits:["node-expand-toggle","node-checkbox-toggle","node-click"],setup(o,{emit:t}){const n=t,e=o;function r(f,b){n("node-expand-toggle",f,b)}function i(f,b){n("node-checkbox-toggle",f,b)}function a(f){n("node-click",f)}function s(f){return f[e.nodeKey]}const c=l.computed(()=>!e.node[e.hasChildrenKey]),d=l.computed(()=>{if(e.disabledKey!==void 0)return e.node[e.disabledKey]}),h=l.computed(()=>{let f="tree-table-row";return f+=` ${e.rowCssClass}`,e.selected&&(f+=" tree-table-row-selected"),e.hidden&&(f+=" tree-table-row-hidden"),f});return(f,b)=>(l.openBlock(),l.createElementBlock("tr",{onClick:b[0]||(b[0]=y=>a(e.node)),class:l.normalizeClass(h.value),"data-key":s(e.node)},[(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(e.columns,(y,w)=>(l.openBlock(),l.createElementBlock(l.Fragment,{key:y.name},[w===0?(l.openBlock(),l.createBlock(Fn,{key:0,column:y,node:e.node,level:e.level,indentationPx:e.indentationPx,leaf:c.value,expanded:e.expanded,disabled:d.value,selected:e.selected,isLoading:e.isLoading,selectionMode:e.selectionMode,"cell-css-class":e.cellCssClass,"border-strategy":e.borderStrategy,"slot-render":e.slotMap.get(y.name),"checkbox-color":e.checkboxColor,onNodeExpandToggle:r,onNodeCheckboxToggle:i},null,8,["column","node","level","indentationPx","leaf","expanded","disabled","selected","isLoading","selectionMode","cell-css-class","border-strategy","slot-render","checkbox-color"])):(l.openBlock(),l.createBlock(Bn,{key:1,column:y,node:e.node,"cell-css-class":e.cellCssClass,"border-strategy":e.borderStrategy,"slot-render":e.slotMap.get(y.name)},null,8,["column","node","cell-css-class","border-strategy","slot-render"]))],64))),128))],10,Ln))}}),Hn=["data-key"],Xn="__tree-table-fake-row-",$n=l.defineComponent({__name:"TreeTableFakeRow",props:{node:{},columns:{},nodeKey:{},disabledKey:{},expanded:{type:Boolean},selected:{type:Boolean},hidden:{type:Boolean},level:{},indentationPx:{},borderStrategy:{},rowCssClass:{},cellCssClass:{},isDragging:{type:Boolean}},emits:["node-click"],setup(o,{emit:t}){const n=t,e=o;function r(d){return d[e.nodeKey]}function i(d){return`${Xn}${r(d).toString()}`}function a(d){n("node-click",d)}const s=l.computed(()=>{let d="tree-table-row tree-table-fake-row";return d+=` ${e.rowCssClass}`,e.selected&&(d+=" tree-table-row-selected"),e.hidden&&(d+=" tree-table-row-hidden"),e.isDragging&&(d+=" tree-table-fake-row-display"),d}),c=l.computed(()=>{let d="";switch(d+=` ${e.cellCssClass}`,e.borderStrategy){case"horizontal":d+=" tree-table-bordered-b";break;case"vertical":d+=" tree-table-bordered-lr";break;case"cell":d+=" tree-table-bordered-lbr";break}return d});return(d,h)=>(l.openBlock(),l.createElementBlock("tr",{onClick:h[0]||(h[0]=f=>a(e.node)),class:l.normalizeClass(s.value),"data-key":i(e.node)},[(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(e.columns,f=>(l.openBlock(),l.createElementBlock("td",{key:f.name,class:l.normalizeClass(c.value)},null,2))),128))],10,Hn))}});/**!
 * Sortable 1.15.6
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function en(o,t){var n=Object.keys(o);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(o);t&&(e=e.filter(function(r){return Object.getOwnPropertyDescriptor(o,r).enumerable})),n.push.apply(n,e)}return n}function ge(o){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?en(Object(n),!0).forEach(function(e){Yn(o,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(n)):en(Object(n)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(n,e))})}return o}function ut(o){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ut=function(t){return typeof t}:ut=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ut(o)}function Yn(o,t,n){return t in o?Object.defineProperty(o,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[t]=n,o}function ue(){return ue=Object.assign||function(o){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(o[e]=n[e])}return o},ue.apply(this,arguments)}function Gn(o,t){if(o==null)return{};var n={},e=Object.keys(o),r,i;for(i=0;i<e.length;i++)r=e[i],!(t.indexOf(r)>=0)&&(n[r]=o[r]);return n}function Vn(o,t){if(o==null)return{};var n=Gn(o,t),e,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(o);for(r=0;r<i.length;r++)e=i[r],!(t.indexOf(e)>=0)&&Object.prototype.propertyIsEnumerable.call(o,e)&&(n[e]=o[e])}return n}function Wn(o){return jn(o)||Un(o)||qn(o)||Qn()}function jn(o){if(Array.isArray(o))return At(o)}function Un(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}function qn(o,t){if(o){if(typeof o=="string")return At(o,t);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor&&(n=o.constructor.name),n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return At(o,t)}}function At(o,t){(t==null||t>o.length)&&(t=o.length);for(var n=0,e=new Array(t);n<t;n++)e[n]=o[n];return e}function Qn(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Zn="1.15.6";function ye(o){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(o)}var Ee=ye(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),je=ye(/Edge/i),tn=ye(/firefox/i),Ue=ye(/safari/i)&&!ye(/chrome/i)&&!ye(/android/i),Nt=ye(/iP(ad|od|hone)/i),nn=ye(/chrome/i)&&ye(/android/i),on={capture:!1,passive:!1};function A(o,t,n){o.addEventListener(t,n,!Ee&&on)}function x(o,t,n){o.removeEventListener(t,n,!Ee&&on)}function ft(o,t){if(t){if(t[0]===">"&&(t=t.substring(1)),o)try{if(o.matches)return o.matches(t);if(o.msMatchesSelector)return o.msMatchesSelector(t);if(o.webkitMatchesSelector)return o.webkitMatchesSelector(t)}catch{return!1}return!1}}function rn(o){return o.host&&o!==document&&o.host.nodeType?o.host:o.parentNode}function oe(o,t,n,e){if(o){n=n||document;do{if(t!=null&&(t[0]===">"?o.parentNode===n&&ft(o,t):ft(o,t))||e&&o===n)return o;if(o===n)break}while(o=rn(o))}return null}var an=/\s+/g;function $(o,t,n){if(o&&t)if(o.classList)o.classList[n?"add":"remove"](t);else{var e=(" "+o.className+" ").replace(an," ").replace(" "+t+" "," ");o.className=(e+(n?" "+t:"")).replace(an," ")}}function E(o,t,n){var e=o&&o.style;if(e){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(o,""):o.currentStyle&&(n=o.currentStyle),t===void 0?n:n[t];!(t in e)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),e[t]=n+(typeof n=="string"?"":"px")}}function Ie(o,t){var n="";if(typeof o=="string")n=o;else do{var e=E(o,"transform");e&&e!=="none"&&(n=e+" "+n)}while(!t&&(o=o.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function ln(o,t,n){if(o){var e=o.getElementsByTagName(t),r=0,i=e.length;if(n)for(;r<i;r++)n(e[r],r);return e}return[]}function me(){var o=document.scrollingElement;return o||document.documentElement}function I(o,t,n,e,r){if(!(!o.getBoundingClientRect&&o!==window)){var i,a,s,c,d,h,f;if(o!==window&&o.parentNode&&o!==me()?(i=o.getBoundingClientRect(),a=i.top,s=i.left,c=i.bottom,d=i.right,h=i.height,f=i.width):(a=0,s=0,c=window.innerHeight,d=window.innerWidth,h=window.innerHeight,f=window.innerWidth),(t||n)&&o!==window&&(r=r||o.parentNode,!Ee))do if(r&&r.getBoundingClientRect&&(E(r,"transform")!=="none"||n&&E(r,"position")!=="static")){var b=r.getBoundingClientRect();a-=b.top+parseInt(E(r,"border-top-width")),s-=b.left+parseInt(E(r,"border-left-width")),c=a+i.height,d=s+i.width;break}while(r=r.parentNode);if(e&&o!==window){var y=Ie(r||o),w=y&&y.a,k=y&&y.d;y&&(a/=k,s/=w,f/=w,h/=k,c=a+h,d=s+f)}return{top:a,left:s,bottom:c,right:d,width:f,height:h}}}function sn(o,t,n){for(var e=De(o,!0),r=I(o)[t];e;){var i=I(e)[n],a=void 0;if(a=r>=i,!a)return e;if(e===me())break;e=De(e,!1)}return!1}function Le(o,t,n,e){for(var r=0,i=0,a=o.children;i<a.length;){if(a[i].style.display!=="none"&&a[i]!==C.ghost&&(e||a[i]!==C.dragged)&&oe(a[i],n.draggable,o,!1)){if(r===t)return a[i];r++}i++}return null}function Ot(o,t){for(var n=o.lastElementChild;n&&(n===C.ghost||E(n,"display")==="none"||t&&!ft(n,t));)n=n.previousElementSibling;return n||null}function Y(o,t){var n=0;if(!o||!o.parentNode)return-1;for(;o=o.previousElementSibling;)o.nodeName.toUpperCase()!=="TEMPLATE"&&o!==C.clone&&(!t||ft(o,t))&&n++;return n}function cn(o){var t=0,n=0,e=me();if(o)do{var r=Ie(o),i=r.a,a=r.d;t+=o.scrollLeft*i,n+=o.scrollTop*a}while(o!==e&&(o=o.parentNode));return[t,n]}function Jn(o,t){for(var n in o)if(o.hasOwnProperty(n)){for(var e in t)if(t.hasOwnProperty(e)&&t[e]===o[n][e])return Number(n)}return-1}function De(o,t){if(!o||!o.getBoundingClientRect)return me();var n=o,e=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=E(n);if(n.clientWidth<n.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return me();if(e||t)return n;e=!0}}while(n=n.parentNode);return me()}function eo(o,t){if(o&&t)for(var n in t)t.hasOwnProperty(n)&&(o[n]=t[n]);return o}function Mt(o,t){return Math.round(o.top)===Math.round(t.top)&&Math.round(o.left)===Math.round(t.left)&&Math.round(o.height)===Math.round(t.height)&&Math.round(o.width)===Math.round(t.width)}var qe;function dn(o,t){return function(){if(!qe){var n=arguments,e=this;n.length===1?o.call(e,n[0]):o.apply(e,n),qe=setTimeout(function(){qe=void 0},t)}}}function to(){clearTimeout(qe),qe=void 0}function un(o,t,n){o.scrollLeft+=t,o.scrollTop+=n}function It(o){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(o).cloneNode(!0):n?n(o).clone(!0)[0]:o.cloneNode(!0)}function fn(o,t){E(o,"position","absolute"),E(o,"top",t.top),E(o,"left",t.left),E(o,"width",t.width),E(o,"height",t.height)}function Bt(o){E(o,"position",""),E(o,"top",""),E(o,"left",""),E(o,"width",""),E(o,"height","")}function hn(o,t,n){var e={};return Array.from(o.children).forEach(function(r){var i,a,s,c;if(!(!oe(r,t.draggable,o,!1)||r.animated||r===n)){var d=I(r);e.left=Math.min((i=e.left)!==null&&i!==void 0?i:1/0,d.left),e.top=Math.min((a=e.top)!==null&&a!==void 0?a:1/0,d.top),e.right=Math.max((s=e.right)!==null&&s!==void 0?s:-1/0,d.right),e.bottom=Math.max((c=e.bottom)!==null&&c!==void 0?c:-1/0,d.bottom)}}),e.width=e.right-e.left,e.height=e.bottom-e.top,e.x=e.left,e.y=e.top,e}var U="Sortable"+new Date().getTime();function no(){var o=[],t;return{captureAnimationState:function(){if(o=[],!!this.options.animation){var e=[].slice.call(this.el.children);e.forEach(function(r){if(!(E(r,"display")==="none"||r===C.ghost)){o.push({target:r,rect:I(r)});var i=ge({},o[o.length-1].rect);if(r.thisAnimationDuration){var a=Ie(r,!0);a&&(i.top-=a.f,i.left-=a.e)}r.fromRect=i}})}},addAnimationState:function(e){o.push(e)},removeAnimationState:function(e){o.splice(Jn(o,{target:e}),1)},animateAll:function(e){var r=this;if(!this.options.animation){clearTimeout(t),typeof e=="function"&&e();return}var i=!1,a=0;o.forEach(function(s){var c=0,d=s.target,h=d.fromRect,f=I(d),b=d.prevFromRect,y=d.prevToRect,w=s.rect,k=Ie(d,!0);k&&(f.top-=k.f,f.left-=k.e),d.toRect=f,d.thisAnimationDuration&&Mt(b,f)&&!Mt(h,f)&&(w.top-f.top)/(w.left-f.left)===(h.top-f.top)/(h.left-f.left)&&(c=ro(w,b,y,r.options)),Mt(f,h)||(d.prevFromRect=h,d.prevToRect=f,c||(c=r.options.animation),r.animate(d,w,f,c)),c&&(i=!0,a=Math.max(a,c),clearTimeout(d.animationResetTimer),d.animationResetTimer=setTimeout(function(){d.animationTime=0,d.prevFromRect=null,d.fromRect=null,d.prevToRect=null,d.thisAnimationDuration=null},c),d.thisAnimationDuration=c)}),clearTimeout(t),i?t=setTimeout(function(){typeof e=="function"&&e()},a):typeof e=="function"&&e(),o=[]},animate:function(e,r,i,a){if(a){E(e,"transition",""),E(e,"transform","");var s=Ie(this.el),c=s&&s.a,d=s&&s.d,h=(r.left-i.left)/(c||1),f=(r.top-i.top)/(d||1);e.animatingX=!!h,e.animatingY=!!f,E(e,"transform","translate3d("+h+"px,"+f+"px,0)"),this.forRepaintDummy=oo(e),E(e,"transition","transform "+a+"ms"+(this.options.easing?" "+this.options.easing:"")),E(e,"transform","translate3d(0,0,0)"),typeof e.animated=="number"&&clearTimeout(e.animated),e.animated=setTimeout(function(){E(e,"transition",""),E(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1},a)}}}}function oo(o){return o.offsetWidth}function ro(o,t,n,e){return Math.sqrt(Math.pow(t.top-o.top,2)+Math.pow(t.left-o.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*e.animation}var ze=[],Pt={initializeByDefault:!0},Qe={mount:function(t){for(var n in Pt)Pt.hasOwnProperty(n)&&!(n in t)&&(t[n]=Pt[n]);ze.forEach(function(e){if(e.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")}),ze.push(t)},pluginEvent:function(t,n,e){var r=this;this.eventCanceled=!1,e.cancel=function(){r.eventCanceled=!0};var i=t+"Global";ze.forEach(function(a){n[a.pluginName]&&(n[a.pluginName][i]&&n[a.pluginName][i](ge({sortable:n},e)),n.options[a.pluginName]&&n[a.pluginName][t]&&n[a.pluginName][t](ge({sortable:n},e)))})},initializePlugins:function(t,n,e,r){ze.forEach(function(s){var c=s.pluginName;if(!(!t.options[c]&&!s.initializeByDefault)){var d=new s(t,n,t.options);d.sortable=t,d.options=t.options,t[c]=d,ue(e,d.defaults)}});for(var i in t.options)if(t.options.hasOwnProperty(i)){var a=this.modifyOption(t,i,t.options[i]);typeof a<"u"&&(t.options[i]=a)}},getEventProperties:function(t,n){var e={};return ze.forEach(function(r){typeof r.eventProperties=="function"&&ue(e,r.eventProperties.call(n[r.pluginName],t))}),e},modifyOption:function(t,n,e){var r;return ze.forEach(function(i){t[i.pluginName]&&i.optionListeners&&typeof i.optionListeners[n]=="function"&&(r=i.optionListeners[n].call(t[i.pluginName],e))}),r}};function Ze(o){var t=o.sortable,n=o.rootEl,e=o.name,r=o.targetEl,i=o.cloneEl,a=o.toEl,s=o.fromEl,c=o.oldIndex,d=o.newIndex,h=o.oldDraggableIndex,f=o.newDraggableIndex,b=o.originalEvent,y=o.putSortable,w=o.extraEventProperties;if(t=t||n&&n[U],!!t){var k,z=t.options,W="on"+e.charAt(0).toUpperCase()+e.substr(1);window.CustomEvent&&!Ee&&!je?k=new CustomEvent(e,{bubbles:!0,cancelable:!0}):(k=document.createEvent("Event"),k.initEvent(e,!0,!0)),k.to=a||n,k.from=s||n,k.item=r||n,k.clone=i,k.oldIndex=c,k.newIndex=d,k.oldDraggableIndex=h,k.newDraggableIndex=f,k.originalEvent=b,k.pullMode=y?y.lastPutMode:void 0;var v=ge(ge({},w),Qe.getEventProperties(e,t));for(var S in v)k[S]=v[S];n&&n.dispatchEvent(k),z[W]&&z[W].call(t,k)}}var io=["evt"],re=function(t,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=e.evt,i=Vn(e,io);Qe.pluginEvent.bind(C)(t,n,ge({dragEl:m,parentEl:R,ghostEl:_,rootEl:B,nextEl:Be,lastDownEl:ht,cloneEl:P,cloneHidden:ke,dragStarted:et,putSortable:q,activeSortable:C.active,originalEvent:r,oldIndex:He,oldDraggableIndex:Je,newIndex:le,newDraggableIndex:xe,hideGhostForTarget:En,unhideGhostForTarget:wn,cloneNowHidden:function(){ke=!0},cloneNowShown:function(){ke=!1},dispatchSortableEvent:function(s){te({sortable:n,name:s,originalEvent:r})}},i))};function te(o){Ze(ge({putSortable:q,cloneEl:P,targetEl:m,rootEl:B,oldIndex:He,oldDraggableIndex:Je,newIndex:le,newDraggableIndex:xe},o))}var m,R,_,B,Be,ht,P,ke,He,le,Je,xe,pt,q,Xe=!1,gt=!1,mt=[],Pe,fe,Kt,Rt,pn,gn,et,$e,tt,nt=!1,bt=!1,vt,Z,Ft=[],Lt=!1,yt=[],Et=typeof document<"u",wt=Nt,mn=je||Ee?"cssFloat":"float",ao=Et&&!nn&&!Nt&&"draggable"in document.createElement("div"),bn=function(){if(Et){if(Ee)return!1;var o=document.createElement("x");return o.style.cssText="pointer-events:auto",o.style.pointerEvents==="auto"}}(),vn=function(t,n){var e=E(t),r=parseInt(e.width)-parseInt(e.paddingLeft)-parseInt(e.paddingRight)-parseInt(e.borderLeftWidth)-parseInt(e.borderRightWidth),i=Le(t,0,n),a=Le(t,1,n),s=i&&E(i),c=a&&E(a),d=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+I(i).width,h=c&&parseInt(c.marginLeft)+parseInt(c.marginRight)+I(a).width;if(e.display==="flex")return e.flexDirection==="column"||e.flexDirection==="column-reverse"?"vertical":"horizontal";if(e.display==="grid")return e.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(i&&s.float&&s.float!=="none"){var f=s.float==="left"?"left":"right";return a&&(c.clear==="both"||c.clear===f)?"vertical":"horizontal"}return i&&(s.display==="block"||s.display==="flex"||s.display==="table"||s.display==="grid"||d>=r&&e[mn]==="none"||a&&e[mn]==="none"&&d+h>r)?"vertical":"horizontal"},lo=function(t,n,e){var r=e?t.left:t.top,i=e?t.right:t.bottom,a=e?t.width:t.height,s=e?n.left:n.top,c=e?n.right:n.bottom,d=e?n.width:n.height;return r===s||i===c||r+a/2===s+d/2},so=function(t,n){var e;return mt.some(function(r){var i=r[U].options.emptyInsertThreshold;if(!(!i||Ot(r))){var a=I(r),s=t>=a.left-i&&t<=a.right+i,c=n>=a.top-i&&n<=a.bottom+i;if(s&&c)return e=r}}),e},yn=function(t){function n(i,a){return function(s,c,d,h){var f=s.options.group.name&&c.options.group.name&&s.options.group.name===c.options.group.name;if(i==null&&(a||f))return!0;if(i==null||i===!1)return!1;if(a&&i==="clone")return i;if(typeof i=="function")return n(i(s,c,d,h),a)(s,c,d,h);var b=(a?s:c).options.group.name;return i===!0||typeof i=="string"&&i===b||i.join&&i.indexOf(b)>-1}}var e={},r=t.group;(!r||ut(r)!="object")&&(r={name:r}),e.name=r.name,e.checkPull=n(r.pull,!0),e.checkPut=n(r.put),e.revertClone=r.revertClone,t.group=e},En=function(){!bn&&_&&E(_,"display","none")},wn=function(){!bn&&_&&E(_,"display","")};Et&&!nn&&document.addEventListener("click",function(o){if(gt)return o.preventDefault(),o.stopPropagation&&o.stopPropagation(),o.stopImmediatePropagation&&o.stopImmediatePropagation(),gt=!1,!1},!0);var Ke=function(t){if(m){t=t.touches?t.touches[0]:t;var n=so(t.clientX,t.clientY);if(n){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.target=e.rootEl=n,e.preventDefault=void 0,e.stopPropagation=void 0,n[U]._onDragOver(e)}}},co=function(t){m&&m.parentNode[U]._isOutsideThisEl(t.target)};function C(o,t){if(!(o&&o.nodeType&&o.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(o));this.el=o,this.options=t=ue({},t),o[U]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(o.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return vn(o,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(a,s){a.setData("Text",s.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:C.supportPointer!==!1&&"PointerEvent"in window&&(!Ue||Nt),emptyInsertThreshold:5};Qe.initializePlugins(this,o,n);for(var e in n)!(e in t)&&(t[e]=n[e]);yn(t);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=t.forceFallback?!1:ao,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?A(o,"pointerdown",this._onTapStart):(A(o,"mousedown",this._onTapStart),A(o,"touchstart",this._onTapStart)),this.nativeDraggable&&(A(o,"dragover",this),A(o,"dragenter",this)),mt.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),ue(this,no())}C.prototype={constructor:C,_isOutsideThisEl:function(t){!this.el.contains(t)&&t!==this.el&&($e=null)},_getDirection:function(t,n){return typeof this.options.direction=="function"?this.options.direction.call(this,t,n,m):this.options.direction},_onTapStart:function(t){if(t.cancelable){var n=this,e=this.el,r=this.options,i=r.preventOnFilter,a=t.type,s=t.touches&&t.touches[0]||t.pointerType&&t.pointerType==="touch"&&t,c=(s||t).target,d=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||c,h=r.filter;if(vo(e),!m&&!(/mousedown|pointerdown/.test(a)&&t.button!==0||r.disabled)&&!d.isContentEditable&&!(!this.nativeDraggable&&Ue&&c&&c.tagName.toUpperCase()==="SELECT")&&(c=oe(c,r.draggable,e,!1),!(c&&c.animated)&&ht!==c)){if(He=Y(c),Je=Y(c,r.draggable),typeof h=="function"){if(h.call(this,t,c,this)){te({sortable:n,rootEl:d,name:"filter",targetEl:c,toEl:e,fromEl:e}),re("filter",n,{evt:t}),i&&t.preventDefault();return}}else if(h&&(h=h.split(",").some(function(f){if(f=oe(d,f.trim(),e,!1),f)return te({sortable:n,rootEl:f,name:"filter",targetEl:c,fromEl:e,toEl:e}),re("filter",n,{evt:t}),!0}),h)){i&&t.preventDefault();return}r.handle&&!oe(d,r.handle,e,!1)||this._prepareDragStart(t,s,c)}}},_prepareDragStart:function(t,n,e){var r=this,i=r.el,a=r.options,s=i.ownerDocument,c;if(e&&!m&&e.parentNode===i){var d=I(e);if(B=i,m=e,R=m.parentNode,Be=m.nextSibling,ht=e,pt=a.group,C.dragged=m,Pe={target:m,clientX:(n||t).clientX,clientY:(n||t).clientY},pn=Pe.clientX-d.left,gn=Pe.clientY-d.top,this._lastX=(n||t).clientX,this._lastY=(n||t).clientY,m.style["will-change"]="all",c=function(){if(re("delayEnded",r,{evt:t}),C.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!tn&&r.nativeDraggable&&(m.draggable=!0),r._triggerDragStart(t,n),te({sortable:r,name:"choose",originalEvent:t}),$(m,a.chosenClass,!0)},a.ignore.split(",").forEach(function(h){ln(m,h.trim(),zt)}),A(s,"dragover",Ke),A(s,"mousemove",Ke),A(s,"touchmove",Ke),a.supportPointer?(A(s,"pointerup",r._onDrop),!this.nativeDraggable&&A(s,"pointercancel",r._onDrop)):(A(s,"mouseup",r._onDrop),A(s,"touchend",r._onDrop),A(s,"touchcancel",r._onDrop)),tn&&this.nativeDraggable&&(this.options.touchStartThreshold=4,m.draggable=!0),re("delayStart",this,{evt:t}),a.delay&&(!a.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(je||Ee))){if(C.eventCanceled){this._onDrop();return}a.supportPointer?(A(s,"pointerup",r._disableDelayedDrag),A(s,"pointercancel",r._disableDelayedDrag)):(A(s,"mouseup",r._disableDelayedDrag),A(s,"touchend",r._disableDelayedDrag),A(s,"touchcancel",r._disableDelayedDrag)),A(s,"mousemove",r._delayedDragTouchMoveHandler),A(s,"touchmove",r._delayedDragTouchMoveHandler),a.supportPointer&&A(s,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(c,a.delay)}else c()}},_delayedDragTouchMoveHandler:function(t){var n=t.touches?t.touches[0]:t;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){m&&zt(m),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;x(t,"mouseup",this._disableDelayedDrag),x(t,"touchend",this._disableDelayedDrag),x(t,"touchcancel",this._disableDelayedDrag),x(t,"pointerup",this._disableDelayedDrag),x(t,"pointercancel",this._disableDelayedDrag),x(t,"mousemove",this._delayedDragTouchMoveHandler),x(t,"touchmove",this._delayedDragTouchMoveHandler),x(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,n){n=n||t.pointerType=="touch"&&t,!this.nativeDraggable||n?this.options.supportPointer?A(document,"pointermove",this._onTouchMove):n?A(document,"touchmove",this._onTouchMove):A(document,"mousemove",this._onTouchMove):(A(m,"dragend",this),A(B,"dragstart",this._onDragStart));try{document.selection?St(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(t,n){if(Xe=!1,B&&m){re("dragStarted",this,{evt:n}),this.nativeDraggable&&A(document,"dragover",co);var e=this.options;!t&&$(m,e.dragClass,!1),$(m,e.ghostClass,!0),C.active=this,t&&this._appendGhost(),te({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(fe){this._lastX=fe.clientX,this._lastY=fe.clientY,En();for(var t=document.elementFromPoint(fe.clientX,fe.clientY),n=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(fe.clientX,fe.clientY),t!==n);)n=t;if(m.parentNode[U]._isOutsideThisEl(t),n)do{if(n[U]){var e=void 0;if(e=n[U]._onDragOver({clientX:fe.clientX,clientY:fe.clientY,target:t,rootEl:n}),e&&!this.options.dragoverBubble)break}t=n}while(n=rn(n));wn()}},_onTouchMove:function(t){if(Pe){var n=this.options,e=n.fallbackTolerance,r=n.fallbackOffset,i=t.touches?t.touches[0]:t,a=_&&Ie(_,!0),s=_&&a&&a.a,c=_&&a&&a.d,d=wt&&Z&&cn(Z),h=(i.clientX-Pe.clientX+r.x)/(s||1)+(d?d[0]-Ft[0]:0)/(s||1),f=(i.clientY-Pe.clientY+r.y)/(c||1)+(d?d[1]-Ft[1]:0)/(c||1);if(!C.active&&!Xe){if(e&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<e)return;this._onDragStart(t,!0)}if(_){a?(a.e+=h-(Kt||0),a.f+=f-(Rt||0)):a={a:1,b:0,c:0,d:1,e:h,f};var b="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");E(_,"webkitTransform",b),E(_,"mozTransform",b),E(_,"msTransform",b),E(_,"transform",b),Kt=h,Rt=f,fe=i}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!_){var t=this.options.fallbackOnBody?document.body:B,n=I(m,!0,wt,!0,t),e=this.options;if(wt){for(Z=t;E(Z,"position")==="static"&&E(Z,"transform")==="none"&&Z!==document;)Z=Z.parentNode;Z!==document.body&&Z!==document.documentElement?(Z===document&&(Z=me()),n.top+=Z.scrollTop,n.left+=Z.scrollLeft):Z=me(),Ft=cn(Z)}_=m.cloneNode(!0),$(_,e.ghostClass,!1),$(_,e.fallbackClass,!0),$(_,e.dragClass,!0),E(_,"transition",""),E(_,"transform",""),E(_,"box-sizing","border-box"),E(_,"margin",0),E(_,"top",n.top),E(_,"left",n.left),E(_,"width",n.width),E(_,"height",n.height),E(_,"opacity","0.8"),E(_,"position",wt?"absolute":"fixed"),E(_,"zIndex","100000"),E(_,"pointerEvents","none"),C.ghost=_,t.appendChild(_),E(_,"transform-origin",pn/parseInt(_.style.width)*100+"% "+gn/parseInt(_.style.height)*100+"%")}},_onDragStart:function(t,n){var e=this,r=t.dataTransfer,i=e.options;if(re("dragStart",this,{evt:t}),C.eventCanceled){this._onDrop();return}re("setupClone",this),C.eventCanceled||(P=It(m),P.removeAttribute("id"),P.draggable=!1,P.style["will-change"]="",this._hideClone(),$(P,this.options.chosenClass,!1),C.clone=P),e.cloneId=St(function(){re("clone",e),!C.eventCanceled&&(e.options.removeCloneOnHide||B.insertBefore(P,m),e._hideClone(),te({sortable:e,name:"clone"}))}),!n&&$(m,i.dragClass,!0),n?(gt=!0,e._loopId=setInterval(e._emulateDragOver,50)):(x(document,"mouseup",e._onDrop),x(document,"touchend",e._onDrop),x(document,"touchcancel",e._onDrop),r&&(r.effectAllowed="move",i.setData&&i.setData.call(e,r,m)),A(document,"drop",e),E(m,"transform","translateZ(0)")),Xe=!0,e._dragStartId=St(e._dragStarted.bind(e,n,t)),A(document,"selectstart",e),et=!0,window.getSelection().removeAllRanges(),Ue&&E(document.body,"user-select","none")},_onDragOver:function(t){var n=this.el,e=t.target,r,i,a,s=this.options,c=s.group,d=C.active,h=pt===c,f=s.sort,b=q||d,y,w=this,k=!1;if(Lt)return;function z(Fe,Ve){re(Fe,w,ge({evt:t,isOwner:h,axis:y?"vertical":"horizontal",revert:a,dragRect:r,targetRect:i,canSort:f,fromSortable:b,target:e,completed:v,onMove:function(Me,Tt){return Ct(B,n,m,r,Me,I(Me),t,Tt)},changed:S},Ve))}function W(){z("dragOverAnimationCapture"),w.captureAnimationState(),w!==b&&b.captureAnimationState()}function v(Fe){return z("dragOverCompleted",{insertion:Fe}),Fe&&(h?d._hideClone():d._showClone(w),w!==b&&($(m,q?q.options.ghostClass:d.options.ghostClass,!1),$(m,s.ghostClass,!0)),q!==w&&w!==C.active?q=w:w===C.active&&q&&(q=null),b===w&&(w._ignoreWhileAnimating=e),w.animateAll(function(){z("dragOverAnimationComplete"),w._ignoreWhileAnimating=null}),w!==b&&(b.animateAll(),b._ignoreWhileAnimating=null)),(e===m&&!m.animated||e===n&&!e.animated)&&($e=null),!s.dragoverBubble&&!t.rootEl&&e!==document&&(m.parentNode[U]._isOutsideThisEl(t.target),!Fe&&Ke(t)),!s.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),k=!0}function S(){le=Y(m),xe=Y(m,s.draggable),te({sortable:w,name:"change",toEl:n,newIndex:le,newDraggableIndex:xe,originalEvent:t})}if(t.preventDefault!==void 0&&t.cancelable&&t.preventDefault(),e=oe(e,s.draggable,n,!0),z("dragOver"),C.eventCanceled)return k;if(m.contains(t.target)||e.animated&&e.animatingX&&e.animatingY||w._ignoreWhileAnimating===e)return v(!1);if(gt=!1,d&&!s.disabled&&(h?f||(a=R!==B):q===this||(this.lastPutMode=pt.checkPull(this,d,m,t))&&c.checkPut(this,d,m,t))){if(y=this._getDirection(t,e)==="vertical",r=I(m),z("dragOverValid"),C.eventCanceled)return k;if(a)return R=B,W(),this._hideClone(),z("revert"),C.eventCanceled||(Be?B.insertBefore(m,Be):B.appendChild(m)),v(!0);var K=Ot(n,s.draggable);if(!K||po(t,y,this)&&!K.animated){if(K===m)return v(!1);if(K&&n===t.target&&(e=K),e&&(i=I(e)),Ct(B,n,m,r,e,i,t,!!e)!==!1)return W(),K&&K.nextSibling?n.insertBefore(m,K.nextSibling):n.appendChild(m),R=n,S(),v(!0)}else if(K&&ho(t,y,this)){var J=Le(n,0,s,!0);if(J===m)return v(!1);if(e=J,i=I(e),Ct(B,n,m,r,e,i,t,!1)!==!1)return W(),n.insertBefore(m,J),R=n,S(),v(!0)}else if(e.parentNode===n){i=I(e);var ae=0,we,Ae=m.parentNode!==n,ee=!lo(m.animated&&m.toRect||r,e.animated&&e.toRect||i,y),pe=y?"top":"left",ce=sn(e,"top","top")||sn(m,"top","top"),de=ce?ce.scrollTop:void 0;$e!==e&&(we=i[pe],nt=!1,bt=!ee&&s.invertSwap||Ae),ae=go(t,e,i,y,ee?1:s.swapThreshold,s.invertedSwapThreshold==null?s.swapThreshold:s.invertedSwapThreshold,bt,$e===e);var F;if(ae!==0){var Ce=Y(m);do Ce-=ae,F=R.children[Ce];while(F&&(E(F,"display")==="none"||F===_))}if(ae===0||F===e)return v(!1);$e=e,tt=ae;var Ne=e.nextElementSibling,be=!1;be=ae===1;var Oe=Ct(B,n,m,r,e,i,t,be);if(Oe!==!1)return(Oe===1||Oe===-1)&&(be=Oe===1),Lt=!0,setTimeout(fo,30),W(),be&&!Ne?n.appendChild(m):e.parentNode.insertBefore(m,be?Ne:e),ce&&un(ce,0,de-ce.scrollTop),R=m.parentNode,we!==void 0&&!bt&&(vt=Math.abs(we-I(e)[pe])),S(),v(!0)}if(n.contains(m))return v(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){x(document,"mousemove",this._onTouchMove),x(document,"touchmove",this._onTouchMove),x(document,"pointermove",this._onTouchMove),x(document,"dragover",Ke),x(document,"mousemove",Ke),x(document,"touchmove",Ke)},_offUpEvents:function(){var t=this.el.ownerDocument;x(t,"mouseup",this._onDrop),x(t,"touchend",this._onDrop),x(t,"pointerup",this._onDrop),x(t,"pointercancel",this._onDrop),x(t,"touchcancel",this._onDrop),x(document,"selectstart",this)},_onDrop:function(t){var n=this.el,e=this.options;if(le=Y(m),xe=Y(m,e.draggable),re("drop",this,{evt:t}),R=m&&m.parentNode,le=Y(m),xe=Y(m,e.draggable),C.eventCanceled){this._nulling();return}Xe=!1,bt=!1,nt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ht(this.cloneId),Ht(this._dragStartId),this.nativeDraggable&&(x(document,"drop",this),x(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Ue&&E(document.body,"user-select",""),E(m,"transform",""),t&&(et&&(t.cancelable&&t.preventDefault(),!e.dropBubble&&t.stopPropagation()),_&&_.parentNode&&_.parentNode.removeChild(_),(B===R||q&&q.lastPutMode!=="clone")&&P&&P.parentNode&&P.parentNode.removeChild(P),m&&(this.nativeDraggable&&x(m,"dragend",this),zt(m),m.style["will-change"]="",et&&!Xe&&$(m,q?q.options.ghostClass:this.options.ghostClass,!1),$(m,this.options.chosenClass,!1),te({sortable:this,name:"unchoose",toEl:R,newIndex:null,newDraggableIndex:null,originalEvent:t}),B!==R?(le>=0&&(te({rootEl:R,name:"add",toEl:R,fromEl:B,originalEvent:t}),te({sortable:this,name:"remove",toEl:R,originalEvent:t}),te({rootEl:R,name:"sort",toEl:R,fromEl:B,originalEvent:t}),te({sortable:this,name:"sort",toEl:R,originalEvent:t})),q&&q.save()):le!==He&&le>=0&&(te({sortable:this,name:"update",toEl:R,originalEvent:t}),te({sortable:this,name:"sort",toEl:R,originalEvent:t})),C.active&&((le==null||le===-1)&&(le=He,xe=Je),te({sortable:this,name:"end",toEl:R,originalEvent:t}),this.save()))),this._nulling()},_nulling:function(){re("nulling",this),B=m=R=_=Be=P=ht=ke=Pe=fe=et=le=xe=He=Je=$e=tt=q=pt=C.dragged=C.ghost=C.clone=C.active=null,yt.forEach(function(t){t.checked=!0}),yt.length=Kt=Rt=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":m&&(this._onDragOver(t),uo(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t=[],n,e=this.el.children,r=0,i=e.length,a=this.options;r<i;r++)n=e[r],oe(n,a.draggable,this.el,!1)&&t.push(n.getAttribute(a.dataIdAttr)||bo(n));return t},sort:function(t,n){var e={},r=this.el;this.toArray().forEach(function(i,a){var s=r.children[a];oe(s,this.options.draggable,r,!1)&&(e[i]=s)},this),n&&this.captureAnimationState(),t.forEach(function(i){e[i]&&(r.removeChild(e[i]),r.appendChild(e[i]))}),n&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,n){return oe(t,n||this.options.draggable,this.el,!1)},option:function(t,n){var e=this.options;if(n===void 0)return e[t];var r=Qe.modifyOption(this,t,n);typeof r<"u"?e[t]=r:e[t]=n,t==="group"&&yn(e)},destroy:function(){re("destroy",this);var t=this.el;t[U]=null,x(t,"mousedown",this._onTapStart),x(t,"touchstart",this._onTapStart),x(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(x(t,"dragover",this),x(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),mt.splice(mt.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!ke){if(re("hideClone",this),C.eventCanceled)return;E(P,"display","none"),this.options.removeCloneOnHide&&P.parentNode&&P.parentNode.removeChild(P),ke=!0}},_showClone:function(t){if(t.lastPutMode!=="clone"){this._hideClone();return}if(ke){if(re("showClone",this),C.eventCanceled)return;m.parentNode==B&&!this.options.group.revertClone?B.insertBefore(P,m):Be?B.insertBefore(P,Be):B.appendChild(P),this.options.group.revertClone&&this.animate(m,P),E(P,"display",""),ke=!1}}};function uo(o){o.dataTransfer&&(o.dataTransfer.dropEffect="move"),o.cancelable&&o.preventDefault()}function Ct(o,t,n,e,r,i,a,s){var c,d=o[U],h=d.options.onMove,f;return window.CustomEvent&&!Ee&&!je?c=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(c=document.createEvent("Event"),c.initEvent("move",!0,!0)),c.to=t,c.from=o,c.dragged=n,c.draggedRect=e,c.related=r||t,c.relatedRect=i||I(t),c.willInsertAfter=s,c.originalEvent=a,o.dispatchEvent(c),h&&(f=h.call(d,c,a)),f}function zt(o){o.draggable=!1}function fo(){Lt=!1}function ho(o,t,n){var e=I(Le(n.el,0,n.options,!0)),r=hn(n.el,n.options,_),i=10;return t?o.clientX<r.left-i||o.clientY<e.top&&o.clientX<e.right:o.clientY<r.top-i||o.clientY<e.bottom&&o.clientX<e.left}function po(o,t,n){var e=I(Ot(n.el,n.options.draggable)),r=hn(n.el,n.options,_),i=10;return t?o.clientX>r.right+i||o.clientY>e.bottom&&o.clientX>e.left:o.clientY>r.bottom+i||o.clientX>e.right&&o.clientY>e.top}function go(o,t,n,e,r,i,a,s){var c=e?o.clientY:o.clientX,d=e?n.height:n.width,h=e?n.top:n.left,f=e?n.bottom:n.right,b=!1;if(!a){if(s&&vt<d*r){if(!nt&&(tt===1?c>h+d*i/2:c<f-d*i/2)&&(nt=!0),nt)b=!0;else if(tt===1?c<h+vt:c>f-vt)return-tt}else if(c>h+d*(1-r)/2&&c<f-d*(1-r)/2)return mo(t)}return b=b||a,b&&(c<h+d*i/2||c>f-d*i/2)?c>h+d/2?1:-1:0}function mo(o){return Y(m)<Y(o)?1:-1}function bo(o){for(var t=o.tagName+o.className+o.src+o.href+o.textContent,n=t.length,e=0;n--;)e+=t.charCodeAt(n);return e.toString(36)}function vo(o){yt.length=0;for(var t=o.getElementsByTagName("input"),n=t.length;n--;){var e=t[n];e.checked&&yt.push(e)}}function St(o){return setTimeout(o,0)}function Ht(o){return clearTimeout(o)}Et&&A(document,"touchmove",function(o){(C.active||Xe)&&o.cancelable&&o.preventDefault()}),C.utils={on:A,off:x,css:E,find:ln,is:function(t,n){return!!oe(t,n,t,!1)},extend:eo,throttle:dn,closest:oe,toggleClass:$,clone:It,index:Y,nextTick:St,cancelNextTick:Ht,detectDirection:vn,getChild:Le,expando:U},C.get=function(o){return o[U]},C.mount=function(){for(var o=arguments.length,t=new Array(o),n=0;n<o;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(C.utils=ge(ge({},C.utils),e.utils)),Qe.mount(e)})},C.create=function(o,t){return new C(o,t)},C.version=Zn;var G=[],ot,Xt,$t=!1,Yt,Gt,_t,rt;function yo(){function o(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return o.prototype={dragStarted:function(n){var e=n.originalEvent;this.sortable.nativeDraggable?A(document,"dragover",this._handleAutoScroll):this.options.supportPointer?A(document,"pointermove",this._handleFallbackAutoScroll):e.touches?A(document,"touchmove",this._handleFallbackAutoScroll):A(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var e=n.originalEvent;!this.options.dragOverBubble&&!e.rootEl&&this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?x(document,"dragover",this._handleAutoScroll):(x(document,"pointermove",this._handleFallbackAutoScroll),x(document,"touchmove",this._handleFallbackAutoScroll),x(document,"mousemove",this._handleFallbackAutoScroll)),Cn(),Dt(),to()},nulling:function(){_t=Xt=ot=$t=rt=Yt=Gt=null,G.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,e){var r=this,i=(n.touches?n.touches[0]:n).clientX,a=(n.touches?n.touches[0]:n).clientY,s=document.elementFromPoint(i,a);if(_t=n,e||this.options.forceAutoScrollFallback||je||Ee||Ue){Vt(n,this.options,s,e);var c=De(s,!0);$t&&(!rt||i!==Yt||a!==Gt)&&(rt&&Cn(),rt=setInterval(function(){var d=De(document.elementFromPoint(i,a),!0);d!==c&&(c=d,Dt()),Vt(n,r.options,d,e)},10),Yt=i,Gt=a)}else{if(!this.options.bubbleScroll||De(s,!0)===me()){Dt();return}Vt(n,this.options,De(s,!1),!1)}}},ue(o,{pluginName:"scroll",initializeByDefault:!0})}function Dt(){G.forEach(function(o){clearInterval(o.pid)}),G=[]}function Cn(){clearInterval(rt)}var Vt=dn(function(o,t,n,e){if(t.scroll){var r=(o.touches?o.touches[0]:o).clientX,i=(o.touches?o.touches[0]:o).clientY,a=t.scrollSensitivity,s=t.scrollSpeed,c=me(),d=!1,h;Xt!==n&&(Xt=n,Dt(),ot=t.scroll,h=t.scrollFn,ot===!0&&(ot=De(n,!0)));var f=0,b=ot;do{var y=b,w=I(y),k=w.top,z=w.bottom,W=w.left,v=w.right,S=w.width,K=w.height,J=void 0,ae=void 0,we=y.scrollWidth,Ae=y.scrollHeight,ee=E(y),pe=y.scrollLeft,ce=y.scrollTop;y===c?(J=S<we&&(ee.overflowX==="auto"||ee.overflowX==="scroll"||ee.overflowX==="visible"),ae=K<Ae&&(ee.overflowY==="auto"||ee.overflowY==="scroll"||ee.overflowY==="visible")):(J=S<we&&(ee.overflowX==="auto"||ee.overflowX==="scroll"),ae=K<Ae&&(ee.overflowY==="auto"||ee.overflowY==="scroll"));var de=J&&(Math.abs(v-r)<=a&&pe+S<we)-(Math.abs(W-r)<=a&&!!pe),F=ae&&(Math.abs(z-i)<=a&&ce+K<Ae)-(Math.abs(k-i)<=a&&!!ce);if(!G[f])for(var Ce=0;Ce<=f;Ce++)G[Ce]||(G[Ce]={});(G[f].vx!=de||G[f].vy!=F||G[f].el!==y)&&(G[f].el=y,G[f].vx=de,G[f].vy=F,clearInterval(G[f].pid),(de!=0||F!=0)&&(d=!0,G[f].pid=setInterval((function(){e&&this.layer===0&&C.active._onTouchMove(_t);var Ne=G[this.layer].vy?G[this.layer].vy*s:0,be=G[this.layer].vx?G[this.layer].vx*s:0;typeof h=="function"&&h.call(C.dragged.parentNode[U],be,Ne,o,_t,G[this.layer].el)!=="continue"||un(G[this.layer].el,be,Ne)}).bind({layer:f}),24))),f++}while(t.bubbleScroll&&b!==c&&(b=De(b,!1)));$t=d}},30),Sn=function(t){var n=t.originalEvent,e=t.putSortable,r=t.dragEl,i=t.activeSortable,a=t.dispatchSortableEvent,s=t.hideGhostForTarget,c=t.unhideGhostForTarget;if(n){var d=e||i;s();var h=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,f=document.elementFromPoint(h.clientX,h.clientY);c(),d&&!d.el.contains(f)&&(a("spill"),this.onSpill({dragEl:r,putSortable:e}))}};function Wt(){}Wt.prototype={startIndex:null,dragStart:function(t){var n=t.oldDraggableIndex;this.startIndex=n},onSpill:function(t){var n=t.dragEl,e=t.putSortable;this.sortable.captureAnimationState(),e&&e.captureAnimationState();var r=Le(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(n,r):this.sortable.el.appendChild(n),this.sortable.animateAll(),e&&e.animateAll()},drop:Sn},ue(Wt,{pluginName:"revertOnSpill"});function jt(){}jt.prototype={onSpill:function(t){var n=t.dragEl,e=t.putSortable,r=e||this.sortable;r.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),r.animateAll()},drop:Sn},ue(jt,{pluginName:"removeOnSpill"});var D=[],se=[],it,he,at=!1,ie=!1,Ye=!1,M,lt,kt;function Eo(){function o(t){for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));t.options.avoidImplicitDeselect||(t.options.supportPointer?A(document,"pointerup",this._deselectMultiDrag):(A(document,"mouseup",this._deselectMultiDrag),A(document,"touchend",this._deselectMultiDrag))),A(document,"keydown",this._checkKeyDown),A(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,avoidImplicitDeselect:!1,setData:function(r,i){var a="";D.length&&he===t?D.forEach(function(s,c){a+=(c?", ":"")+s.textContent}):a=i.textContent,r.setData("Text",a)}}}return o.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(n){var e=n.dragEl;M=e},delayEnded:function(){this.isMultiDrag=~D.indexOf(M)},setupClone:function(n){var e=n.sortable,r=n.cancel;if(this.isMultiDrag){for(var i=0;i<D.length;i++)se.push(It(D[i])),se[i].sortableIndex=D[i].sortableIndex,se[i].draggable=!1,se[i].style["will-change"]="",$(se[i],this.options.selectedClass,!1),D[i]===M&&$(se[i],this.options.chosenClass,!1);e._hideClone(),r()}},clone:function(n){var e=n.sortable,r=n.rootEl,i=n.dispatchSortableEvent,a=n.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||D.length&&he===e&&(_n(!0,r),i("clone"),a()))},showClone:function(n){var e=n.cloneNowShown,r=n.rootEl,i=n.cancel;this.isMultiDrag&&(_n(!1,r),se.forEach(function(a){E(a,"display","")}),e(),kt=!1,i())},hideClone:function(n){var e=this;n.sortable;var r=n.cloneNowHidden,i=n.cancel;this.isMultiDrag&&(se.forEach(function(a){E(a,"display","none"),e.options.removeCloneOnHide&&a.parentNode&&a.parentNode.removeChild(a)}),r(),kt=!0,i())},dragStartGlobal:function(n){n.sortable,!this.isMultiDrag&&he&&he.multiDrag._deselectMultiDrag(),D.forEach(function(e){e.sortableIndex=Y(e)}),D=D.sort(function(e,r){return e.sortableIndex-r.sortableIndex}),Ye=!0},dragStarted:function(n){var e=this,r=n.sortable;if(this.isMultiDrag){if(this.options.sort&&(r.captureAnimationState(),this.options.animation)){D.forEach(function(a){a!==M&&E(a,"position","absolute")});var i=I(M,!1,!0,!0);D.forEach(function(a){a!==M&&fn(a,i)}),ie=!0,at=!0}r.animateAll(function(){ie=!1,at=!1,e.options.animation&&D.forEach(function(a){Bt(a)}),e.options.sort&&xt()})}},dragOver:function(n){var e=n.target,r=n.completed,i=n.cancel;ie&&~D.indexOf(e)&&(r(!1),i())},revert:function(n){var e=n.fromSortable,r=n.rootEl,i=n.sortable,a=n.dragRect;D.length>1&&(D.forEach(function(s){i.addAnimationState({target:s,rect:ie?I(s):a}),Bt(s),s.fromRect=a,e.removeAnimationState(s)}),ie=!1,wo(!this.options.removeCloneOnHide,r))},dragOverCompleted:function(n){var e=n.sortable,r=n.isOwner,i=n.insertion,a=n.activeSortable,s=n.parentEl,c=n.putSortable,d=this.options;if(i){if(r&&a._hideClone(),at=!1,d.animation&&D.length>1&&(ie||!r&&!a.options.sort&&!c)){var h=I(M,!1,!0,!0);D.forEach(function(b){b!==M&&(fn(b,h),s.appendChild(b))}),ie=!0}if(!r)if(ie||xt(),D.length>1){var f=kt;a._showClone(e),a.options.animation&&!kt&&f&&se.forEach(function(b){a.addAnimationState({target:b,rect:lt}),b.fromRect=lt,b.thisAnimationDuration=null})}else a._showClone(e)}},dragOverAnimationCapture:function(n){var e=n.dragRect,r=n.isOwner,i=n.activeSortable;if(D.forEach(function(s){s.thisAnimationDuration=null}),i.options.animation&&!r&&i.multiDrag.isMultiDrag){lt=ue({},e);var a=Ie(M,!0);lt.top-=a.f,lt.left-=a.e}},dragOverAnimationComplete:function(){ie&&(ie=!1,xt())},drop:function(n){var e=n.originalEvent,r=n.rootEl,i=n.parentEl,a=n.sortable,s=n.dispatchSortableEvent,c=n.oldIndex,d=n.putSortable,h=d||this.sortable;if(e){var f=this.options,b=i.children;if(!Ye)if(f.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),$(M,f.selectedClass,!~D.indexOf(M)),~D.indexOf(M))D.splice(D.indexOf(M),1),it=null,Ze({sortable:a,rootEl:r,name:"deselect",targetEl:M,originalEvent:e});else{if(D.push(M),Ze({sortable:a,rootEl:r,name:"select",targetEl:M,originalEvent:e}),e.shiftKey&&it&&a.el.contains(it)){var y=Y(it),w=Y(M);~y&&~w&&y!==w&&function(){var v,S;w>y?(S=y,v=w):(S=w,v=y+1);for(var K=f.filter;S<v;S++)if(!~D.indexOf(b[S])&&oe(b[S],f.draggable,i,!1)){var J=K&&(typeof K=="function"?K.call(a,e,b[S],a):K.split(",").some(function(ae){return oe(b[S],ae.trim(),i,!1)}));J||($(b[S],f.selectedClass,!0),D.push(b[S]),Ze({sortable:a,rootEl:r,name:"select",targetEl:b[S],originalEvent:e}))}}()}else it=M;he=h}if(Ye&&this.isMultiDrag){if(ie=!1,(i[U].options.sort||i!==r)&&D.length>1){var k=I(M),z=Y(M,":not(."+this.options.selectedClass+")");if(!at&&f.animation&&(M.thisAnimationDuration=null),h.captureAnimationState(),!at&&(f.animation&&(M.fromRect=k,D.forEach(function(v){if(v.thisAnimationDuration=null,v!==M){var S=ie?I(v):k;v.fromRect=S,h.addAnimationState({target:v,rect:S})}})),xt(),D.forEach(function(v){b[z]?i.insertBefore(v,b[z]):i.appendChild(v),z++}),c===Y(M))){var W=!1;D.forEach(function(v){if(v.sortableIndex!==Y(v)){W=!0;return}}),W&&(s("update"),s("sort"))}D.forEach(function(v){Bt(v)}),h.animateAll()}he=h}(r===i||d&&d.lastPutMode!=="clone")&&se.forEach(function(v){v.parentNode&&v.parentNode.removeChild(v)})}},nullingGlobal:function(){this.isMultiDrag=Ye=!1,se.length=0},destroyGlobal:function(){this._deselectMultiDrag(),x(document,"pointerup",this._deselectMultiDrag),x(document,"mouseup",this._deselectMultiDrag),x(document,"touchend",this._deselectMultiDrag),x(document,"keydown",this._checkKeyDown),x(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(n){if(!(typeof Ye<"u"&&Ye)&&he===this.sortable&&!(n&&oe(n.target,this.options.draggable,this.sortable.el,!1))&&!(n&&n.button!==0))for(;D.length;){var e=D[0];$(e,this.options.selectedClass,!1),D.shift(),Ze({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:e,originalEvent:n})}},_checkKeyDown:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},ue(o,{pluginName:"multiDrag",utils:{select:function(n){var e=n.parentNode[U];!e||!e.options.multiDrag||~D.indexOf(n)||(he&&he!==e&&(he.multiDrag._deselectMultiDrag(),he=e),$(n,e.options.selectedClass,!0),D.push(n))},deselect:function(n){var e=n.parentNode[U],r=D.indexOf(n);!e||!e.options.multiDrag||!~r||($(n,e.options.selectedClass,!1),D.splice(r,1))}},eventProperties:function(){var n=this,e=[],r=[];return D.forEach(function(i){e.push({multiDragElement:i,index:i.sortableIndex});var a;ie&&i!==M?a=-1:ie?a=Y(i,":not(."+n.options.selectedClass+")"):a=Y(i),r.push({multiDragElement:i,index:a})}),{items:Wn(D),clones:[].concat(se),oldIndicies:e,newIndicies:r}},optionListeners:{multiDragKey:function(n){return n=n.toLowerCase(),n==="ctrl"?n="Control":n.length>1&&(n=n.charAt(0).toUpperCase()+n.substr(1)),n}}})}function wo(o,t){D.forEach(function(n,e){var r=t.children[n.sortableIndex+(o?Number(e):0)];r?t.insertBefore(n,r):t.appendChild(n)})}function _n(o,t){se.forEach(function(n,e){var r=t.children[n.sortableIndex+(o?Number(e):0)];r?t.insertBefore(n,r):t.appendChild(n)})}function xt(){D.forEach(function(o){o!==M&&o.parentNode&&o.parentNode.removeChild(o)})}C.mount(new yo),C.mount(jt,Wt);const Te="data-key",Re="__tree-table-fake-row-",Ge="__tree-table-null-hierarchy-key",Co=l.defineComponent({__name:"Mangrove64Tree",props:{nodes:{},columns:{},draggable:{type:Boolean,default:!1},nodeKey:{default:"id"},childrenKey:{default:"children"},parentKey:{default:"parent_id"},hasChildrenKey:{default:"has_children"},disabledKey:{},orderKey:{},expandedNodeAtStart:{},expandeAllNodeAtStart:{type:Boolean,default:!1},selectedNodeAtStart:{},selectionMode:{default:"unique"},resizableColumns:{type:Boolean,default:!1},indentationPx:{default:25},borderStrategy:{default:"none"},tableCssClass:{default:""},rowCssClass:{default:""},cellCssClass:{default:""},nodeKeyType:{default:"number"},checkboxColor:{default:"primary"}},emits:["node-expand","node-collapse","node-select","node-unselect","lazy-load-children","node-move"],setup(o,{expose:t,emit:n}){const e=o,r=n;let i=null;const a=l.useSlots(),s=new Map,c=new Map,d=new Map,h=l.ref([]),f=l.ref(e.columns),b=l.ref(new Set),y=l.ref(new Set),w=l.ref(new Map),k=l.ref(new Set),z=l.ref(new Set),W=l.ref(null),v=l.ref(!1),S=l.ref(!1),K=l.ref(0),J=we(W);function ae(){var u,g;c.set(Ge,{parent:Ge+"-unknown",children:[]}),h.value=ee(e.nodes,0,Ge,[])[0],e.expandeAllNodeAtStart?h.value.forEach(p=>{b.value.add(H(p))}):(u=e.expandedNodeAtStart)==null||u.forEach(p=>{b.value.add(p)}),(g=e.selectedNodeAtStart)==null||g.forEach(p=>{F(p,!0)}),J.start()}function we(u){let g;const p={multiDrag:!0,dataIdAttr:"node-key",onStart:()=>{S.value=!0},onEnd:N=>{const O=N.item.getAttribute(Te);if(!O){S.value=!1;return}if(!y.value.has(de(O))){S.value=!1;return}if(O.includes(Re)){S.value=!1;return}if(!i){S.value=!1;return}const L=i.includes(Re)?"brother-to-previous":"child-to-previous",Q=de(i.replaceAll(Re,"")),Se=c.get(Q);if(!Se){S.value=!1;return}let Zt=!1;if([...y.value].sort((V,j)=>(d.get(V)??0)-(d.get(j)??0)).forEach(V=>{const j=c.get(V);if(!j)return;if(y.value.has(j.parent)){const ne=w.value.get(j.parent)??-1;w.value.set(V,ne+1);return}const We=c.get(j.parent);We&&(We.children=We.children.filter(ne=>ne!==V));let ve=-1;if(L==="brother-to-previous"){j.parent=Se.parent;const ne=c.get(Se.parent);ne&&(ve=ne.children.findIndex(Jt=>Jt===Q),ve!==-1&&(ve+=1),ne.children.splice(ve,0,V))}else if(L==="child-to-previous"){j.parent=Q;const ne=c.get(Q);ne&&ne.children.unshift(V)}if(ve!==-1&&L==="brother-to-previous"||L==="child-to-previous"){const ne=j.parent===Ge?null:j.parent,Jt=Ae(V,0),Ko=d.get(V)??0,st=h.value.splice(Ko,Jt+1);pe();const Ro=d.get(Q)??0;if(ne!==null){const Nn=d.get(ne);if(Nn!==void 0){const On=h.value[Nn];let ct=[];Zt?ct=ct.concat(qt(On)):(ct=[],Zt=!0),ct.push(st[0]),Tt(On,ct)}}So(st[0],ne),_o(st[0],ve),h.value.splice(Ro+1,0,...st),pe(),r("node-move",st[0],ne,ve)}}),L==="child-to-previous"){const V=s.get(Me(Q));if(V&&V.parentElement){const j=V.parentElement;j.removeChild(V),j.insertBefore(V,N.item)}}S.value=!1,i=null,K.value++,l.nextTick(()=>{s.clear(),ce(h.value),J.stop(),J.start(),y.value.forEach(V=>{F(V,!0)})})},onSelect:N=>{const O=N.item.getAttribute(Te);if(!O)return!1;y.value.has(O)||C.utils.deselect(N.item)},onDeselect:N=>{const O=N.item.getAttribute(Te);if(!O)return!1;y.value.has(O)&&C.utils.select(N.item)},onMove:N=>{var V;const O=N.dragged.getAttribute(Te);if(!O||!y.value.has(de(O))||O.includes(Re))return!1;const L=N.willInsertAfter?N.related.getAttribute(Te):(V=N.related.previousElementSibling)==null?void 0:V.getAttribute(Te);if(!L)return!1;i=L;const Q=L.includes(Re)?"brother-to-previous":"child-to-previous",Se=Q==="child-to-previous"&&N.willInsertAfter?de(L):de(L.replaceAll(Re,""));if(!c.get(Se))return!1;[...y.value].sort((j,We)=>(d.get(j)??0)-(d.get(We)??0)).forEach(j=>{if(!c.get(j))return;const ve=w.value.get(Se)??0;Q==="brother-to-previous"?w.value.set(j,ve):Q==="child-to-previous"&&w.value.set(j,ve+1)})}};return{stop:()=>{e.draggable&&(g==null||g.destroy(),g=void 0)},start:()=>{if(!(!e.draggable||u.value===null)){try{C.mount(new Eo)}catch{}g=new C(u.value,{...p})}}}}function Ae(u,g){const p=c.get(u);return p&&p.children.forEach(T=>{g++,g=Ae(T,g)}),g}function ee(u,g,p,T){const X=[];return u.sort((N,O)=>Qt(O)-Qt(N)).forEach(N=>{const O=H(N);T.push(N),d.set(O,T.length-1);const L=ee(qt(N),g+1,O,T);c.set(O,{parent:p,children:L[1]});const Q=c.get(p);Q&&Q.children.push(O),w.value.set(O,g),T=L[0]}),[T,X]}function pe(){d.clear(),h.value.forEach((u,g)=>{const p=H(u);d.set(p,g)})}function ce(u){if(!W.value)return;const g=[...W.value.querySelectorAll(".tree-table-row")];u.forEach(p=>{const T=H(p),X=g.find(O=>{const L=O.getAttribute(Te);return de(L)===T});if(!X)return;s.set(T,X);const N=g.find(O=>{const L=O.getAttribute(Te);return(L==null?void 0:L.toString())===Me(T)});N&&s.set(Me(T),N)})}function de(u){switch(e.nodeKeyType){case"string":return u??"";case"symbol":return Symbol(u==null?void 0:u.toString());case"number":return Number(u)}}function F(u,g){if(g){y.value.add(u);const p=s.get(u),T=s.get(Me(u));p&&T&&e.draggable&&(C.utils.select(p),C.utils.select(T))}else{y.value.delete(u);const p=s.get(u),T=s.get(Me(u));p&&T&&e.draggable&&(C.utils.deselect(p),C.utils.deselect(T))}}function Ce(){y.value.forEach(u=>{const g=s.get(u);g&&C.utils.deselect(g)}),y.value.clear()}function Ne(u){var T;let g=()=>{};const p=H(u);switch(e.selectionMode){case"unique":Ce(),F(p,!0),g=()=>r("node-select",u);break;case"multiple":{const X=y.value.has(p);if(X)F(p,!1),g=()=>r("node-unselect",u);else{F(p,!0);const N=(T=c.get(p))==null?void 0:T.parent;N&&F(N,X),g=()=>r("node-select",u)}Ve(p,X);break}case"checkbox":return}g()}function be(u,g){if(g){if(b.value.add(H(u)),r("node-expand",u),ko(u))return;if(qt(u).length>0){const p=Dn(u);if(!p)return;Oe(p,!1,!1)}else{const p=H(u);z.value.add(p),r("lazy-load-children",{node:u,nodeKey:p,done:X=>{const N=d.get(p);if(N===void 0)return;const O=c.get(p);c.set(p,{parent:(O==null?void 0:O.parent)??Ge,children:X.map(Q=>H(Q))});const L=w.value.get(p)??0;X.forEach(Q=>{const Se=H(Q);c.set(Se,{parent:p,children:[]}),w.value.set(Se,L+1)}),Tt(u,X),h.value.splice(N+1,0,...X),pe(),l.nextTick(()=>{ce(X),y.value.has(p)&&(F(p,!0),Ve(p,!0))})}}),z.value.delete(p)}}else{b.value.delete(H(u)),r("node-collapse",u);const p=Dn(u);if(!p)return;Oe(p,!0,!0)}}function Oe(u,g,p){u.children.forEach(T=>{if(g?(k.value.add(T),F(T,!g)):k.value.delete(T),p){const X=c.get(T);X&&Oe(X,g,p)}})}function Fe(u,g){let p=()=>{};const T=H(u);switch(e.selectionMode){case"checkbox":g?(F(T,g),p=()=>r("node-select",u)):(F(T,g),Ut(T,g),p=()=>r("node-unselect",u)),Ve(T,g);break;case"multiple":case"unique":return}p()}function Ve(u,g){const p=c.get(u);p&&p.children.forEach(T=>{F(T,g),Ve(T,g)})}function Ut(u,g){const p=c.get(u);p&&(F(p.parent,g),p.parent!==Ge&&Ut(p.parent,g))}function Me(u){return`${Re}${u.toString()}`}function Tt(u,g){u[e.childrenKey]=g}function So(u,g){e.parentKey&&(u[e.parentKey]=g)}function _o(u,g){e.orderKey&&(u[e.orderKey]=g)}function Do(u){return u[e.parentKey]}function qt(u){return u[e.childrenKey]??[]}function H(u){return u[e.nodeKey]}function Dn(u){const g=H(u);return c.get(g)}function kn(u){const g=H(u);return w.value.get(g)??0}function Qt(u){return u[e.orderKey]??0}function ko(u){return!u[e.hasChildrenKey]}function xn(u){const g=H(u);return b.value.has(g)}function Tn(u){const g=H(u);return y.value.has(g)}function xo(u){const g=H(u);return z.value.has(g)}function An(u){const g=H(u);return k.value.has(g)}function To(u){return h.value.find(g=>H(g)===u)}function Ao(u){const g=d.get(H(u));g!==void 0&&(h.value[g]=u)}function No(u){const g=H(u),p=Do(u)??"-1",T=c.get(p);T&&T.children.push(g),c.set(g,{parent:p,children:[]}),w.value.set(g,(w.value.get(p)??0)+1),k.value.has(p)&&k.value.add(g);const X=d.get(p),N=Qt(u);X===void 0?h.value.splice(N,0,u):h.value.splice(X+Math.abs(N),0,u),l.nextTick(()=>{ce([u])}),pe()}function Oo(u){const g=c.get(u);!g||g.children.length>0||(h.value=h.value.filter(p=>H(p)!==u),s.delete(u),c.delete(u),b.value.delete(u),y.value.delete(u),w.value.delete(u),k.value.delete(u),pe())}function Mo(){return y.value}function Io(){return b.value}const Bo=l.computed(()=>{let u="";return u+=e.tableCssClass,u}),Po=l.computed(()=>{const u=new Map;for(const g in a){const p=a[g];p&&u.set(g,p)}return u});return t({getSelectedKeys:Mo,getExpandedKeys:Io,getNodeByKey:To,updateNode:Ao,addNode:No,removeNode:Oo}),l.watch(()=>e.columns,u=>{f.value=u}),l.onMounted(()=>{ae(),l.nextTick(()=>{ce(h.value),v.value=!0})}),l.onScopeDispose(()=>{J.stop()}),(u,g)=>(l.openBlock(),l.createElementBlock("div",null,[l.createElementVNode("div",null,[l.createElementVNode("table",{class:l.normalizeClass(["tree-table-table",Bo.value])},[l.createElementVNode("thead",null,[l.createElementVNode("tr",null,[(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(f.value,(p,T)=>(l.openBlock(),l.createBlock(Mn,{key:p.name,column:p,resizableColumns:e.resizableColumns,index:T,borderStrategy:e.borderStrategy},null,8,["column","resizableColumns","index","borderStrategy"]))),128))])]),(l.openBlock(),l.createElementBlock("tbody",{ref_key:"treeBodyEl",ref:W,key:K.value},[(l.openBlock(!0),l.createElementBlock(l.Fragment,null,l.renderList(h.value,p=>(l.openBlock(),l.createElementBlock(l.Fragment,{key:p[e.nodeKey]},[l.createVNode(zn,{node:p,columns:o.columns,"node-key":e.nodeKey,"children-key":e.childrenKey,"has-children-key":e.hasChildrenKey,"disabled-key":e.disabledKey,selectionMode:e.selectionMode,expanded:xn(p),selected:Tn(p),isLoading:xo(p),level:kn(p),hidden:An(p),indentationPx:e.indentationPx,"row-css-class":e.rowCssClass,"cell-css-class":e.cellCssClass,"border-strategy":e.borderStrategy,"slot-map":Po.value,"checkbox-color":e.checkboxColor,onNodeExpandToggle:be,onNodeCheckboxToggle:Fe,onNodeClick:Ne},null,8,["node","columns","node-key","children-key","has-children-key","disabled-key","selectionMode","expanded","selected","isLoading","level","hidden","indentationPx","row-css-class","cell-css-class","border-strategy","slot-map","checkbox-color"]),l.createVNode($n,{node:p,columns:o.columns,"node-key":e.nodeKey,"disabled-key":e.disabledKey,expanded:xn(p),selected:Tn(p),level:kn(p),hidden:An(p),indentationPx:e.indentationPx,"row-css-class":e.rowCssClass,"cell-css-class":e.cellCssClass,"border-strategy":e.borderStrategy,"is-dragging":S.value,onNodeClick:Ne},null,8,["node","columns","node-key","disabled-key","expanded","selected","level","hidden","indentationPx","row-css-class","cell-css-class","border-strategy","is-dragging"])],64))),128))]))],2)])]))}});_e.Mangrove64Tree=Co,Object.defineProperty(_e,Symbol.toStringTag,{value:"Module"})});
